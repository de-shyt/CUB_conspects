# Java

*Author: Daria Shutina*



[TOC]

## 23-02-02

### –¢–∏–ø–∏–∑–∞—Ü–∏—è

#### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è 

*–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ* —è–∑—ã–∫–∏ —á—ë—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ç–∏–ø—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –¢–∏–ø—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –ö–æ–¥ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ —Ç–∏–ø—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç. 

–ö–∞–∂–¥–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —è–∑—ã–∫–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ç–∏–ø—É, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞. –ò–Ω–æ–≥–¥–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–∞–º –≤—ã–≤–µ—Å—Ç–∏ —Ç–∏–ø, –µ—Å–ª–∏ –æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ö–∞—Å–∫–µ–ª–ª–µ —Ñ—É–Ω–∫—Ü–∏—è `add x y = x + y` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —á–∏—Å–ª–∞ (–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å–ª–æ), –ø–æ—Ç–æ–º—É —á—Ç–æ `+` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —á–∏—Å–ª–∞—Ö. 

*–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ* —è–∑—ã–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø, –Ω–æ –∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –µ–≥–æ —Å–∞–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø–∏—Ç–æ–Ω–µ —Ñ—É–Ω–∫—Ü–∏—è `def f(x, y): return x + y` –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ —á–∏—Å–ª–∞, –∏ —Å—Ç—Ä–æ–∫–∏. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `x`–∏ `y` –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≤ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏. 

–ì–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —è–∑—ã–∫–∞—Ö –∑–Ω–∞—á–µ–Ω–∏—è –æ–±–ª–∞–¥–∞—é—Ç —Ç–∏–ø–æ–º ($\texttt{1} \Rightarrow \texttt{Integer}$), –∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –Ω–µ—Ç (`x` –∏ `y` –º–æ–≥—É—Ç –±—ã—Ç—å —á–µ–º —É–≥–æ–¥–Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ).



#### –°–∏–ª—å–Ω–∞—è –∏ —Å–ª–∞–±–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è

–¢–∏–ø–∏–∑–∞—Ü–∏—è —Å–∏–ª—å–Ω–∞—è, –µ—Å–ª–∏ –Ω–µ—Ç –Ω–µ—è–≤–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —Ç–∏–ø–æ–≤. 

–¢–∏–ø–∏–∑–∞—Ü–∏—è —Å–ª–∞–±–∞—è, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω—ã –Ω–µ—è–≤–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤. 

–ì—Ä–∞–Ω–∏—Ü–∞ –º–µ–∂–¥—É "—Å–∏–ª—å–Ω—ã–º" –∏ "—Å–ª–∞–±—ã–º" —Ä–∞–∑–º—ã—Ç–∞. –ú—è—É.







### –û —è–∑—ã–∫–µ

- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ø–ü. 

- –û–±–ª–∞–¥–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é: —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –±—É–¥–µ—Ç –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –¥–∂–∞–≤–µ –±–æ–ª–µ–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ª–∏–±–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ª–∏–±–æ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏. 

- –ï—Å—Ç—å —Å—Ç—Ä–æ–≥–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —è–∑—ã–∫–∞ –∏ JVM. –£ –∫–∞–∂–¥–æ–π –≤–µ—Ä—Å–∏–∏ —Å–≤–æ—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è.
-  –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (thanks tgarbage collection)







### –û–±—â–∏–µ —Å–ª–æ–≤–∞

`jshell` (–¥–∂–µ–π —ç—Å —Ö–µ–ª–ª) -- –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —à—Ç—É–∫–∞ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞; —è–≤–ª—è–µ—Ç—Å—è REPL (read-evaluate-print-loop).



```java
public class Main {
    public static void main(String[] args) {
        System.out.println("aboba");
    }
}
```

`System.out.println("aboba");` -- —ç—Ç–æ statement.

`System.out.println("aboba")` -- —ç—Ç–æ expression –∏ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞.

`System.out` —è–≤–ª—è–µ—Ç—Å—è *–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º* –¥–ª—è –º–µ—Ç–æ–¥–∞ `println` (–∫–∞–∫ –∏ `System`  –¥–ª—è `out` –≤ `System.out`).







### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

<img src="./pics for conspects/JA/JA 23-02-04 1.png" alt="JA 23-02-04 1" style="zoom:67%;" />



–ü—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –µ—ë —Ç–∏–ø –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–∏—Å–∞—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `var`:

```java
int x;
x = 5;
var y = 5;
```

–¢–∏–ø –≤—ã—è–≤–ª—è–µ—Ç—Å—è –Ω–µ—è–≤–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.



–ï—Å–ª–∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–≤–µ—Å—Ç–∏ –Ω–µ–ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–æ–¥ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è:

```java
int x;
System.out.println(x); // does not compile
```



–ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ –º–µ—Ç–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è. –ï—Å–ª–∏ —ç—Ç–æ —Å—Å—ã–ª–æ—á–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Ç–æ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—Å—ã–ª–∫–∞, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å—Å—ã–ª–∫–∞ –∏ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –º–µ—Ç–æ–¥–∞. 







### –¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã

| —á–∏—Å–ª–æ             | –ø—Ä–µ—Ñ–∏–∫—Å      |
| ----------------- | ------------ |
| int               | -            |
| long              | L            |
| –¥–≤–æ–∏—á–Ω–æ–µ          | 0b           |
| –≤–æ—Å—å–º–∏—Ä–∏—á–Ω–æ–µ      | 0 (—ç—Ç–æ –Ω–æ–ª—å) |
| —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–∏—Ä–∏—á–Ω–æ–µ | 0x           |

–ß—Ç–æ–±—ã –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —á–∏—Å–ª–æ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏–∂–Ω–µ–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ: `1_000_000`. 







### –í–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã

| —á–∏—Å–ª–æ         | —Å—É—Ñ—Ñ–∏–∫—Å                        |
| ------------- | ------------------------------ |
| double        | D (1D)                         |
| float         | F (1F)                         |
| —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–æ–π | 1.6e-19 = $1,6 \cdot 10^{-19}$ |







### equals()

–í —Å–ª—É—á–∞–µ –æ–±—ä–µ–∫—Ç–æ–≤, –≤ –ø–µ—Ä–º–µ–Ω–Ω–æ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä `==` –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∞–¥—Ä–µ—Å–∞ –æ–±—ä–µ–∫—Ç–æ–≤, –∞ –Ω–µ —Å–∞–º–∏ –æ–±—ä–µ–∫—Ç—ã.  

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `equals()`, –∂–∏–≤—É—â–∏–π –≤ –∫–ª–∞—Å—Å–µ `Object`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–∞–∫ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä `==`, –Ω–æ –µ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å:

```java
public class MyClass {
    int id;

    public boolean equals(MyClass otherClass) {
        return this.id ==  otherClass.id;
    }

    public static void main(String[] args) {
        var o1 = new MyClass(); 
        o1.id = 1;
        var o2 = new MyClass(); 
        o2.id = 1;
        System.out.println(o1.equals(o2));
    }
}

```

–î–µ—Ç–∏, –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `equals()`!!







### String pool

String pool -- —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫, —Å–æ–∑–¥–∞–Ω–Ω–∞—è —Ä–∞–¥–∏ —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏. –í –Ω–µ–≥–æ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –Ω—É–∂–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–µ—Å–ª–∏ –µ—ë —Ç–∞–º –Ω–µ –±—ã–ª–æ —Ä–∞–Ω–µ–µ), –∏ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏. 

–ï—Å–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∫–∞–∫ `new String("aboba")`,  —Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä `new` –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ—Ç –¥–ª—è —Å—Ç—Ä–æ–∫–∏ –Ω–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏, –Ω–µ –¥–æ–±–∞–≤–ª—è—è –µ–µ –≤ –ø—É–ª–ª —Å—Ç—Ä–æ–∫.

–£ —Å—Ç—Ä–æ–∫ –µ—Å—Ç—å –º–µ—Ç–æ–¥ `intern()`. –û–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å—Ç—Ä–æ–∫–∞ –≤ –ø—É–ª–ª–µ; –µ—Å–ª–∏ –Ω–µ—Ç, —Å–æ–∑–¥–∞—ë—Ç –µ—ë; –ø–æ—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å —Å—Ç—Ä–æ–∫–∏. 

```java
public class Main {
   public static void main(String[] args) {
       var s1 = "aboba";
       var s2 = new String("aboba");
       System.out.println(s1 == s2.intern());
   }
}
```





#### –ü—Ä–∏–º–µ—Ä

```java
s1 = "aboba";
s2 = new String("aboba");
```

–í—ã—Ä–∞–∂–µ–Ω–∏–µ `s1 == s2` –≤–µ—Ä–Ω–µ—Ç `false`, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–∞–∑–Ω—ã–µ –∞–¥—Ä–µ—Å–∞. 

–ù–æ `s1.equals(s2)`  –≤–µ—Ä–Ω–µ—Ç `true`, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –∫–ª–∞—Å—Å–∞ `String` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –º–µ—Ç–æ–¥ `equals`. 

–ï—Å–ª–∏ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –Ω–µ –≤–∞–∂–µ–Ω —Ä–µ–≥–∏—Å—Ç—Ä, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `equalsIgnoreCase()`. 







### Unicode –≤ –¥–∂–∞–≤–µ 

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –≤ –¥–∂–∞–≤—É –¥–æ–±–∞–≤–∏–ª–∏ —Ç–æ–ª—å–∫–æ Unicode. –û—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–æ–¥–∏—Ä–æ–≤–æ–∫ –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø—É—Ç–∞–Ω–∏—Ü—ã. 



**–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Ä–º–∏–Ω—ã Unicode**

—Å—É—Ä—Å: http://www.unicode.org/glossary/

<img src="./pics for conspects/JA/JA 23-02-04 2.png" alt="JA 23-02-04 2" style="zoom:67%;" />

–°–∏–º–≤–æ–ª—ã –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ 0 –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è surrogate pair. –°–æ—Å—Ç–æ—è—Ç –∏–∑ –¥–≤—É—Ö code-—é–Ω–∏—Ç–æ–≤: –ø–µ—Ä–≤—ã–π -- high surrogate, –≤—Ç–æ—Ä–æ–π -- low surrogate. 



–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –¥–∂–∞–≤–µ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –¥–≤—É—Ö –±–∞–π—Ç–æ–≤. `char` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω. –ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, —Ç–æ –ø–∏—Å–∞—Ç—å –∏—Ö –Ω—É–∂–Ω–æ –≤ `String`, –∞ –Ω–µ –≤ `char`:

```java
public static void main(String[] args) {
    char c = 'üòÄ';
    System.out.println(c);  // ==> ?
    String s = "üòÄ";
    System.out.println(s);  // ==> üòÄ
}
```







### NaN

= Not-A-Number. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ (i.e. –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å, $\sqrt{-1}$). 

–ó–Ω–∞—á–µ–Ω–∏–µ NaN –Ω–µ–ª—å–∑—è –Ω–∏ —Å —á–µ–º —Å—Ä–∞–≤–Ω–∏—Ç—å. –í—ã—Ä–∞–∂–µ–Ω–∏–µ `Float.NaN == Float.NaN` –≤–µ—Ä–Ω–µ—Ç `false`, –∞ `Float.NaN != Float.NaN` –≤–µ—Ä–Ω–µ—Ç `true`. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ NaN, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `Float.isNaN()`.







### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

- –õ–∏—Ç–µ—Ä–∞–ª—ã (—á–∏—Å–ª–∞, —Å—Ç—Ä–æ–∫–∏)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ final-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏ —Ç–∏–ø–∞ String, –µ—Å–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä ‚Äì –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ (`final int i = 1;`)
- –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏
- –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —Å—Ç—Ä–æ–∫
- –°–∫–æ–±–∫–∏
- –£—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä, –µ—Å–ª–∏ –≤—Å–µ –æ–ø–µ—Ä–∞–Ω–¥—ã ‚Äì –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.







### Type cast (–ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤)

```java
int x = 128;
byte c = (byte) x;
```







### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤

#### –†–∞—Å—à–∏—Ä—è—é—â–µ–µ

<img src="./pics for conspects/JA/JA 23-02-04 3.png" alt="JA 23-02-04 3" style="zoom:67%;" />

–û—Ç–∫—É–¥–∞ –ø–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏? –£ `double` –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ü–µ–ª—É—é —á–∞—Å—Ç—å: –æ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ $10^{15}$, –ø–æ—Ç–æ–º—É —á—Ç–æ —á–∏—Å–µ–ª –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ. –ê `long` –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ $10^{15}$. 



#### –°–∂–∏–º–∞—é—â–µ–µ

<img src="./pics for conspects/JA/JA 23-02-04 4.png" alt="JA 23-02-04 4" style="zoom:67%;" />



#### –î–µ—Ç–∞–ª–∏

–†–∞—Å—à–∏—Ä—è—é—â–∏–µ –∏ —Å–∂–∏–º–∞—é—â–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –∫–∞—Å—Ç–∞. –ù–æ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∏ —Ç–∞–∫:

```java
final int i = 2;
byte c = i;
```

–≠—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ—è–≤–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —á–∏—Å–ª–æ –≤ –Ω—É–∂–Ω—ã–π —Ç–∏–ø. 

–ü—Ä–∏ —ç—Ç–æ–º –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—ã–π–¥–µ—Ç –∑–∞ —Ä–∞–º–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –∫–∞—Å—Ç—É–µ–º, –∫–æ–¥ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è:

```java
final int i = 128;
byte c = i;
// error: incompatible types: possible lossy conversion from int to byte
```







### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö

- –£–Ω–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –±–∏—Ç–æ–≤—ã–π —Å–¥–≤–∏–≥, –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å–∏–≤–∞: `byte`, `short`, `char` $\rightarrow$ `int`, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è

- –ë–∏–Ω–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ -- –µ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è:

  1. –õ—é–±–æ–π –æ–ø–µ—Ä–∞–Ω–¥ `double` $\Rightarrow$ –¥—Ä—É–≥–æ–π –æ–ø–µ—Ä–∞–Ω–¥ `double`

  2. –õ—é–±–æ–π –æ–ø–µ—Ä–∞–Ω–¥ `float` $\Rightarrow$ –¥—Ä—É–≥–æ–π –æ–ø–µ—Ä–∞–Ω–¥ `float`

  3. –õ—é–±–æ–π –æ–ø–µ—Ä–∞–Ω–¥ `long` $\Rightarrow$ –¥—Ä—É–≥–æ–π –æ–ø–µ—Ä–∞–Ω–¥ `long`

  4. –ò–Ω–∞—á–µ –æ–±–∞ –æ–ø–µ—Ä–∞–Ω–¥–∞ `int`

     

–î–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è:

```java
byte a1 = 1;
byte a2 = 2;
byte sum = a1 + a2;
// error: incompatible types: possible lossy conversion from int to byte
```





#### –ü—Ä–∏–º–µ—Ä

–î–µ—Ç–∏, –∏–∑–±–µ–≥–∞–π—Ç–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤ –æ–¥–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏!! 

(–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)

```java
double a = Long.MAX_VALUE;
long b = Long.MAX_VALUE;
int c = 1;

System.out.println(a+b+c); // 1.8446744073709552E19
// a + b -> double (–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ—Ç) 
//   + c -> double

System.out.println(c+b+a); // 0.0
// c + b -> long (–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ)
//   + a -> double
```





#### –ó–∞–º–µ—á–∞–Ω–∏–µ

–ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ (`+=` –≤–º–µ—Å—Ç–æ `var + var`), –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–∞—Å—Ç –Ω–µ—è–≤–Ω–æ:

```java
byte b = 1;
b = b + 1; // –Ω–µ –Ω–æ—Ä–º
b += 1;    // –Ω–æ—Ä–º

char c = 'a';
c *= 1.2; // –∑–∞–∫–æ–Ω–Ω–æ, –Ω–æ –≤—Ç—Ñ
```







### –ú–∞—Å—Å–∏–≤—ã

–ú–∞—Å—Å–∏–≤ -- —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∂–∏–≤—É—â–∏–π –≤ –Ω–∞ –∫—É—á–µ. –í–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è *—Å—Å—ã–ª–∫–∏* –Ω–∞ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã.   

–î–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ -- –≤—Å–µ–≥–¥–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞. –û–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –Ω–æ –ø–æ—Å–ª–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –¥–ª–∏–Ω—É –º–∞—Å—Å–∏–≤–∞ –Ω–µ–ª—å–∑—è –ø–æ–º–µ–Ω—è—Ç—å. 

```java
int[] oneD = new int[10];

int[] oneD_init = new int[]{1, 2, 3, 4, 5}; 
// –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ —Å—Ç–∞–Ω–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω–∞ –≤ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏

int[] oneDsimple = {1, 2, 3, 4, 5};

int[][] twoD = new int[2][5];

int[][] twoDsimple = { {1, 2, 3}, {4, 5}, {6} };
// –º–∞—Å—Å–∏–≤ —Å—Å—ã–ª–æ–∫ –Ω–∞ –¥—Ä—É–≥–∏–µ –º–∞—Å—Å–∏–≤—ã
// –¥–ª–∏–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–∞—è 
```



–í –ø–∞–º—è—Ç–∏ –º–∞—Å—Å–∏–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ:

```asciiarmor
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    type     ‚îÇ   length   ‚îÇ  [0]  ‚îÇ  [1]  ‚îÇ  [2]  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–†–∞–∑–º–µ—Ä—ã –¥–≤—É–º–µ—Ä–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –º–æ–≥—É—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤–ª–∏—è—Ç—å –Ω–∞ –ø–∞–º—è—Ç—å. 

`new int[2][500]` –∑–∞–π–º–µ—Ç $4056$ –±–∞–π—Ç:   $2 + 2 \cdot 2 + \textit{–ø–∞–º—è—Ç—å –¥–ª—è —è—á–µ–µ–∫}$.  

`new int[500][2]` –∑–∞–π–º–µ—Ç $14016$ –±–∞–π—Ç:   $2 + 500 \cdot 2 + \textit{–ø–∞–º—è—Ç—å –¥–ª—è —è—á–µ–µ–∫}$. –¢—É—Ç –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ `type+length`.





#### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–∞—Å—Å–∏–≤–æ–º

–ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞ `Array`: [java.util.Arrays](https://courses.cs.washington.edu/courses/cse341/98au/java/jdk1.2beta4/docs/api/java/util/Arrays.html)

```java
int[][] tmp = new int[3][];

Arrays.fill(tmp, 0, tmp.length, new {1});
// –∑–∞–ø–æ–ª–Ω–∏—Ç—å –º–∞—Å—Å–∏–≤ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ 

int[][] ints = { {1, 2, 3}, {4, 5}, {6} };

System.out.println(ints.length);

int[][] copy = ints.clone();
// —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞. –î–ª—è –¥–≤—É–º–µ—Ä–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –∫–ª–æ–Ω–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π, –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–µ –∂–µ –æ–±—ä–µ–∫—Ç—ã 

int[][] copyRange = Arrays.copyOfRange(ints, 1, 3);

System.out.println(ints == copy); // false
// `==` —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∞–¥—Ä–µ—Å–∞ –æ–±—ä–µ–∫—Ç–æ–≤ 

System.out.println(ints.equals(copy)); // false
// –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, `equals` —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø–æ –∞–¥—Ä–µ—Å–∞–º

System.out.println(Arrays.equals(ints, copy)); // true

System.out.println(ints); // [I@3cb5cdba
// –∞–±—Ä–∞ –∫–∞–¥–∞–±—Ä–∞

System.out.println(Arrays.toString(ints)); // [1, 3, 3, 2, 1]
// –æ–±—ã—á–Ω—ã–π –≤—ã–≤–æ–¥ –º–∞—Å—Å–∏–≤–∞

Arrays.sort(ints);
```









## 23-02-16

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π

<img src="./pics for conspects/JA/JA 23-02-16 1.png" alt="JA 23-02-16 1" style="zoom:67%;" />

–ü—Ä–∏–º–µ—Ä —Ç–µ—Ä–Ω–∞—Ä–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (ternary):

```java
System.out.println(x > 0 ? "positive" : "negative or zero");
```







### –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö

–í –¥–∂–∞–≤–µ –Ω–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –º–µ—Ç–æ–¥–∞:

```java
public static void main() {
    class Point {
        int x, y;
        
        void shift(int dx, int dy) {
            x += dx;
            y += dy;
        }
        
        void shift(int dx) {
            shift(dx, 0);
        }
    }
    
    Point p = new Point();
    p.x = 1;
    p.y = 1;
    p.shift(1, 1);
    p.shift(1);
}
```







### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `static`

 `static` —É –º–µ—Ç–æ–¥–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–µ—Ç–æ–¥ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å–∞–º–æ–º—É —Ç–∏–ø—É, –∞ –Ω–µ –∫ –∏–Ω—Å—Ç–∞–Ω—Å—É —ç—Ç–æ–≥–æ —Ç–∏–ø–∞. –¢–æ –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –æ–±—â–∏–º —É –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤. 

<img src="./pics for conspects/JA/JA 23-02-07 1.png" alt="JA 23-02-07 1" style="zoom:67%;" />

–í —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º –º–µ—Ç–æ–¥–µ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –æ–±—ä–µ–∫—Ç `this` (–æ–Ω –∂–µ –æ–±—â–∏–π), –ø–æ—ç—Ç–æ–º—É –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±—ä–µ–∫—Ç–∞–º –∏–ª–∏ –Ω–µ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–ª—è–º. 

–û–±—ã—á–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏, –∫–æ–≥–¥–∞ –æ–Ω–∏ –Ω–∏–∫–∞–∫ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞.

–í –¥–∂–∞–≤–µ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞ –Ω–µ–ª—å–∑—è –¥–∞–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `main`. –ò–Ω–æ–≥–¥–∞ –±—ã–≤–∞–µ—Ç —É–¥–æ–±–Ω—ã–º –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –±–µ–∑ –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è `main`). –î–ª—è —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤ –ø–æ–º–µ—á–∞—é—Ç—Å—è `static`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è –∏–Ω—Å—Ç–∞–Ω—Å –∫–ª–∞—Å—Å–∞ (–≤—Å–ø–æ–º–Ω–∏–º —Ñ—É–Ω–∫—Ü–∏—é `main`).







### Object

–û–±—ä–µ–∫—Ç -- –æ–±–ª–∞—Å—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –≤ –∫—É—á–µ. –û–±–ª–∞–¥–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –Ω–∞–±–æ—Ä –∑–Ω–∞—á–µ–Ω–∏–π. –ü–æ—Ä—è–¥–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Å—Ç—Ä–æ–≥–æ.

–û–±—ä–µ–∫—Ç –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç —Ç–∏–ø–∞ `java.lang.Object`. 

–ó–Ω–∞—á–µ–Ω–∏–µ-—Å—Å—ã–ª–∫–∞ –º–æ–∂–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç –∏–ª–∏ –Ω–∞ null, –Ω–æ –Ω–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ–ª–µ –æ–±—ä–µ–∫—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –≤ –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–∞—à–∏–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏. 





#### –ú–µ—Ç–æ–¥—ã Object

–ú–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —É –∫–∞–∂–¥–æ–º –æ–±—ä–µ–∫—Ç–µ:

- `toString()` -- –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ –≤—ã–≤–æ–¥–∏—Ç —Ö—ç—à-–∫–æ–¥(?), –¥–ª—è record –∫–ª–∞—Å—Å–æ–≤ –≤—ã–≤–æ–¥–∏—Ç `<className>[field1=value, field2=value]`
- `equals()` -- –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
- `hashCode()` -- –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
- `getClass()` -- final-–º–µ—Ç–æ–¥, –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
- `wait()`, `notify()`, `notifyAll` -- –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–∫–∏. final-–º–µ—Ç–æ–¥—ã, –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
- `clone()` -- –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å





#### –ö–ª–∞—Å—Å—ã

##### –°–æ–∑–¥–∞–Ω–∏–µ

```java
class Point {
    int x = 0; // –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    int y = 0;
    
    Point(int x, int y) {
        this.x = x; // `this.` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –∫–∞–∫-—Ç–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å
        this.y = y; // –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞
    }
    
    // –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –≤ –¥–∂–∞–≤–µ –Ω–µ—Ç
}
```



```java
public static void main(String[] args) {
    Point p1 = new Point(1, 2);
    Point p2 = new Point(3, 4);
    
    // –°–æ–∑–¥–∞–ª–∏ –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –∫—É—á–µ. –í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `p1` –∏ `p2`
    // —Ö—Ä–∞–Ω—è—Ç—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç—Ç–∏ –æ–±—ä–µ–∫—Ç—ã. 
    
    p1 = p2;
    // –ü–æ–º–µ–Ω—è–ª–∏ —Å—Å—ã–ª–∫—É, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –≤ `p1`. 
    // –¢–µ–ø–µ—Ä—å –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–≤–æ–º—É –æ–±—ä–µ–∫—Ç—É, 
    // –∏ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ —É–Ω–∏—á—Ç–æ–∂–∏–ª –ø–µ—Ä–≤—ã–π –æ–±—ä–µ–∫—Ç. 
}
```





##### Record

Records —ç—Ç–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –¥–∞—Ç–∞ –∫–ª–∞—Å—Å—ã, —Ç—Ä–µ–±—É—é—â–∏–µ —Ç–æ–ª—å–∫–æ —Ç–∏–ø –∏ –∏–º—è –ø–æ–ª–µ–π. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –∑–∞–º–µ–Ω–∞ —Ç–µ–º–ø–ª–µ–π—Ç–∞–º, –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞. 

```java
public record Person (String name, String address) {}
```

–£ records –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è:

- –ø—É–±–ª–∏—á–Ω—ãq –∫–æ—Å—Ç—Ä—É–∫—Ç–æ—Ä
- –ø—É–±–ª–∏—á–Ω—ã–µ –≥–µ—Ç—Ç–µ—Ä—ã, —Å–µ—Ç—Ç–µ—Ä—ã
- –º–µ—Ç–æ–¥ `equals()`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –µ—Å–ª–∏ –≤—Å–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ. 
- –º–µ—Ç–æ–¥ `hashCode()`. –•—ç—à –∫–æ–¥—ã –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, –µ—Å–ª–∏ –≤—Å–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ.
- –º–µ—Ç–æ–¥ `toString()`



–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:

```java
public record Person(String name, String address) {
    public Person {  // –º–µ–Ω—è–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
        Objects.requireNonNull(name);
        Objects.requireNonNull(address);
    }
    
    public Person(String name) {
        this(name, "Unknown");
    }
}
```





###### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –º–µ—Ç–æ–¥—ã

```java
public record Person(String name, String address) {
    public static String UNKNOWN_ADDRESS = "Unknown";
    
    public static Person unnamed(String address) {
        return new Person("Unnamed", address);
    }
}
```

–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–∏–º –º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è –∏–º—è record –∫–ª–∞—Å—Å–∞:

```java
Person.UNKNOWN_ADDRESS;
Person.unnamed("aboba address");
```





##### Self-referential class

–ö–ª–∞—Å—Å —Ç–∏–ø–∞ `Type`, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –ø–æ–ª–µ —Ç–∞–∫–æ–≥–æ –∂–µ —Ç–∏–ø–∞ `Type`:

```java
class Aboba {
    private Aboba abobaField;
    private String data;
    
    public Aboba() {}
}
```

–ü—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø–∏—Å–∞–Ω–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –º–æ–∂–Ω–æ –∑–∞–∫–æ–Ω—á–∏—Ç—å –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ –∏ –ø–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫—É `StackOverflowError` –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.  

–¢–∞–∫–∞—è —à—Ç—É–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Singleton pattern. 







### `instanceof`

–û–ø–µ—Ä–∞—Ç–æ—Ä, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–±—ä–µ–∫—Ç –∏–Ω—Å—Ç–∞–Ω—Å–æ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞:

```java
record Point(int x, int y) {
    void shift(int dx, int dy) {
        x += dx;
        y += dy;
    }
}

public static void process(Object obj) {
    if (obj instanceof Point) {
        Point point = (Point) obj;
        point.shift(1, 1);
    }
}
```



–ö–æ–Ω—Ü–µ–ø—Ü–∏—è "instanceof + –∫–∞—Å—Ç" –ø–æ–ø—É–ª—è—Ä–Ω–∞, –ø–æ—ç—Ç–æ–º—É –≤ —è–∑—ã–∫ –¥–æ–±–∞–≤–∏–ª–∏ —Ñ–∏—á—É:

```java
if (obj instanceof Point point) {
    point.shift(1, 1);
}
```

–û–±—ä–µ–∫—Ç `point` —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤ `true`. 







### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤, –µ–≥–æ —Ä–µ–∞–ª–∏–∑—É—é—â–∏—Ö, –∏ —Å–ø–æ—Å–æ–±—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ç–∞–∫–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏. –í–∞–∂–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ—Ç –∫–ª–∞—Å—Å–∞ –≤ —Ç–æ–º, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–∏–µ –æ–±—ä–µ–∫—Ç–∞. –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –Ω–µ—Ç –∫–æ–Ω—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤.

–£ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã, –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–µ—Ç —Ç–µ–ª–∞ —Ñ—É–Ω–∫—Ü–∏–∏). –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –æ–±—ã—á–Ω—ã–µ –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã. –¢–µ–ª–∞ –º–µ—Ç–æ–¥–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤.

–ü–æ–ª—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–æ–≥—É—Ç –±—ã—Ç—å, –Ω–æ –æ–Ω–∏ –æ–±—è–∑–∞–Ω—ã –±—ã—Ç—å `static` –∏`final`.



–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç -- —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã—Ä–∞–∂–∞—é—Ç—Å—è:

- –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞—Ö –º–µ—Ç–æ–¥–æ–≤. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º. 

- –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö. –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–≤ –∏ —Ç.–¥. –ü—Ä–∏–º–µ—Ä -- Javadoc, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞. 

  –î–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ —Ä–∞—Å–ø–∏—Å–∞—Ç—å, –∫–∞–∫–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, –∫–∞–∫–æ–π —Å–º—ã—Å–ª —É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:

  ```java
  /**
   * Returns a sum of double numbers
   * @param a first number
   * @param b second number
   * @return a result
   */
  double sum(double a, double b);
  ```

  

- –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ü—Ä–æ—Å—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫–∏—Ü–π –∏ –º–µ—Ç–æ–¥–æ–≤.







#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `interface`

```java
public interface Swimmable  {
     public void swim();
}

public class Duck implements Swimmable {
    @Override
    public void swim() {
        System.out.println("–£—Ç–æ—á–∫–∞, –ø–ª—ã–≤–∏!");
    }
    
    public static void main(String[] args) {
        Duck duck = new Duck();
        duck.swim();
    }
}
```

`Swimmable` -- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. `Duck` -- –∫–ª–∞—Å—Å, –æ–±—ä–µ–∫—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–¥—Ö–æ–¥—è—Ç –ø–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–µ  –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –í –∫–ª–∞—Å—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—Å–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. 

–•–æ—Ä–æ—à–∏–º —Ç–æ–Ω–æ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞–ø–∏—Å–∞—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é`@Override`. –≠—Ç–æ —è–≤–Ω–æ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ, —á—Ç–æ –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω. –ï—Å–ª–∏ –º–µ—Ç–æ–¥ —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, —Ç–æ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. 

 



#### –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã

–û–±—ã—á–Ω—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å. –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞. 

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª—è. 

```java
abstract static class AbstractSwimmable extends Swimmable {
    String name;
    
    @Override
    public void swim() {
        System.out.println(name + ", –ø–ª—ã–≤–∏!");
    }
}
```

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞ Object. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–æ–≤–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –∫–ª–∞—Å—Å—ã, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. 







#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `final`

`final` –∫–ª–∞—Å—Å -- –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å. 

`final` –º–µ—Ç–æ–¥ -- –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å. 

`final` –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è -- –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–ª—å–∑—è –ø–æ–º–µ–Ω—è—Ç—å. 







#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `sealed`

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤. –ß—Ç–æ-—Ç–æ —Å—Ä–µ–¥–Ω–µ–µ –º–µ–∂–¥—É final –∏ –Ω–µ-final. –Ø–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ —Å –ø–æ–º–æ—â—å—é —Å–ª–æ–≤–∞ `permits`:

```java
sealed interface Swimmable permits Duck {
    ...
}
```







#### –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ß–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `of` –∏–ª–∏ `from`. –°—É—Ç—å —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã. –ö–∞–∫ –±—ã –≤–º–µ—Å—Ç–æ —è–≤–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `new` –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥. 

```java
interface Vector {
    static Vector of(int x, int y, int z) {
        if (x == 0 && y == 0 && z == 0) {
            return new ZeroVector();
        }
        return new ArrayVector(x, y, z);
    }
}
```







### Enum

–ö–ª–∞—Å—Å, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤. –≠–∫–∑–µ–º–ø–ª—è—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Å–µ —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∫–ª–∞—Å—Å—É. 

```java
enum Weekday {
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY,
    SUNDAY
}
```

–ú–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–∏ –ø–æ–ª—è, –º–µ—Ç–æ–¥—ã –∏ –∫–æ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã. –ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω. 

```java
enum Weekday {
    // —ç–∫–∑–µ–º–ø–ª—è—Ä—ã
    MONDAY("MON", false), TUESDAY("TUE", false), 
    WEDNESDAY("WED", false), THURSDAY("THU", false), 
    FRIDAY("FRI", false), SATURDAY("SAT", true), 
    SUNDAY("SUN", true);
    
    // –ø–æ–ª—è
    private final String shortName;
    private final boolean weekend;
    
    // –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
    Weekday(String shortName, boolean weekend) {
    	this.shortName = shortName;
    	this.weekend = weekend;
    }
    
    // –º–µ—Ç–æ–¥—ã
    public String getShortName() { return shortName; }
    public boolean isWeekend() { return weekend; }
}
```







#### –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- `<EnumClassName>.values()` -- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ –≤—Å–µ—Ö enum-–∫–æ–Ω—Å—Ç–∞–Ω—Ç
- `<EnumClassName>.valueOf(String)` -- –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ (–∏–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ)
- `<EnumVlalue>.name()` -- —É–∑–Ω–∞—Ç—å –∏–º—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- `<EnumValue>.original()` -- —É–∑–Ω–∞—Ç—å –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –≤ enum-–∫–ª–∞—Å—Å–µ. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω—É–ª—è. 







#### switch, –∏—Å–ø–æ–ª—å–∑—É—è —ç–∫–∑–µ–º–ø–ª—è—Ä—ã enum-–∫–ª–∞—Å—Å–∞

```java
String workingHours(Weekday weekday) {
    return switch (weekday) {
        case MONDAY, FRIDAY -> "9:30-13:00";
        case TUESDAY, THURSDAY -> "14:00-17:30";
        case WEDNESDAY, SATURDAY, SUNDAY -> "–í—ã—Ö–æ–¥–Ω–æ–π";
    };
}

for (Weekday weekday : Weekday.values()) {
    System.out.println(workingHours(weekday))
}
```







### Dependency Injection (DI)

*Dependency injection* is a way of organizing and connecting different parts of a software application. It allows the dependencies of a class to be provided <u>externally</u> rather than being created or managed <u>within the class itself</u>.

There are three types of DI: 

- **Constructor Injection** -- dependencies are provided as parameters in the constructor:

  ```java
  public class MyClass {
      private Dependency dependency;
  
      public MyClass(Dependency dependency) {
          this.dependency = dependency;
      }
  }
  ```

- **Setter Injection** -- dependencies are set through the setter methods:

  ```java
  public class MyClass {
      private Dependency dependency;
  
      public void setDependency(Dependency dependency) {
          this.dependency = dependency;
      }
  }
  ```

- **Method Injection** -- dependencies are passed as parameters to the method of the class:

  ```java
  public class MyClass {
      ...
      public void doSomething(Dependency dependency) {
          // Use the dependency here
      }
  }
  ```







### –ü–∞–∫–µ—Ç—ã

–ü–∞–∫–µ—Ç -- —ç—Ç–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤. –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã. –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–∞–∫–µ—Ç, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∫–ª–∞—Å—Å–æ–≤ –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É 

```java
package packageName;
```

–ü–∞–∫–µ—Ç—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö, —Ç–æ –µ—Å—Ç—å —Ñ–∞–π–ª –ø–∞–∫–µ—Ç–∞ `Name` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ø–∞–ø–∫–µ `Name`. 

–ü–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏. –ü–æ –≤–Ω–µ—à–Ω–µ–º—É –≤–∏–¥—É —Å–ª–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, –≥–¥–µ –∫–ª–∞—Å—Å, –∞ –≥–¥–µ –ø–∞–∫–µ—Ç. –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —á—Ç–æ –ø–∞–∫–µ—Ç—ã –∏–º–µ–Ω—É—é—Ç—Å—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã, –∞ –∫–ª–∞—Å—Å—ã -- —Å –±–æ–ª—å—à–æ–π.  

<img src="./pics for conspects/JA/JA 23-02-16 2.png" alt="JA 23-02-16 2" style="zoom:60%;" />







### –ú–æ–¥—É–ª–∏

–ú–æ–¥—É–ª—å -- –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤. –ó–∞–¥–∞—ë—Ç —è–≤–Ω—ã–π –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –û–±–ª–∞–¥–∞–µ—Ç —Å–∏–ª—å–Ω–æ–π –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–µ–π: –µ—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –ø–∞–∫–µ—Ç –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω, —Ç–æ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è. 

```java
module demo {
    requires java.xml;
    requires java.desktop;
    exports com.example.demo; // —ç–∫—Å–ø–æ—Ä—Ç –ø–∞–∫–µ—Ç–∞
}
```

–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã.









## 23-02-23

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è

```java
public int get(int index) {
    if (index < 0) {
        throw new IllegalArgumentException("index < 0");
    }
    return array[index];
}
```

–í –¥–∂–∞–≤–µ `stack trace` –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∞ –Ω–µ –≤ –º–æ–º–µ–Ω—Ç –µ–≥–æ –≤—ã–∫–∏–¥—ã–≤–∞–Ω–∏—è. –≠—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç –¥–∂–∞–≤—É –æ—Ç –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤. –ï—Å–ª–∏ `new` –∏ `throw` –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∫–æ–¥–∞, –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –Ω–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ. 

–ú–æ–∂–Ω–æ —É –º–µ—Ç–æ–¥–∞ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –æ–Ω –∫–∏–¥–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: 

```java
public int get(int index) throws IllegalArgumentException {
    if (index < 0) {
        throw new IllegalArgumentException("index < 0");
    }
    return array[index];
}
```





#### –ò–µ—Ä–∞—Ä—Ö–∏—è

–ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å -- `Throwable`. –ñ–∏–≤–µ—Ç –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ `java.lang.Throwable`. –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ, –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç –Ω–µ–≥–æ. 

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ. –ì–æ–ª—É–±—ã–º –æ—Ç–º–µ—á–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (—Ç–æ –µ—Å—Ç—å –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ -- –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, -- —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ —É–∫–∞–∑–∞–Ω—ã –ø–æ—Å–ª–µ —Å–ª–æ–≤–∞ `throws`), –∂–µ–ª—Ç—ã–º -- –Ω–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ. –°—É—Ç—å –≥–æ–ª—É–±—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ —Ç–æ–º, —á—Ç–æ 

<img src="./pics for conspects/JA/JA 23-03-03 1.png" alt="JA 23-03-03 1" style="zoom:55%;" />







####  –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã

```java
Throwable();
Throwable(message);  // exception with message
Throwable(message, cause);  // exception with message and cause. Cause is another exception 
                            // which was the reason for throwing currect exception.
```





#### –ü–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã —É –∏—Å–∫–ª—é—á–µ–Ω–∏–π

```java
Exception exception = new Exception();
exception.getMessage();  // get message of exception
exception.getCause();    // get cause of exception

exception.getStackTrace();  // stack trace is an array of objects. Each object stores name of class, 
                            // name of method and number of line where exception was thrown.

exception.getSuppressed(); // if exception B is thrown inside exception A, exception A will be suppressed and saved. 
```







#### try-catch

```java
public int get(int index) {
    if (index < 0) {
        throw new IllegalArgumentException("get(index = " + index.toString() + "): index < 0\n");
    }
    return array[index];
}

public static void main(String[] args) {
    try {
        get(-1);
    } 
    catch (IllegalArgumentException ex) {
        System.out.println("message: " + ex.getMessage());
        System.out.println(ex.getStackTrace());
    }
}
```

–ï—Å—Ç—å –µ—â–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `finally`, —Ç–æ–≥–¥–∞ –ø—Ä–∏ –ª—é–±–æ–º –∏—Å—Ö–æ–¥–µ –±–ª–æ–∫ —Å `finally` –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω:

```java
public static void main(String[] args) {
    try {
        get(-1);
    } 
    catch (IllegalArgumentException ex) {
        System.out.println("message: " + ex.getMessage());
        System.out.println(ex.getStackTrace());
    }
    finally {
        System.out.println("Finishing main\n");
    }
}
```





##### –ï—â–µ –ø—Ä–æ `finally`

–ü—Ä–∏–º–µ—Ä, –∫–∞–∫ –Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å:

```java
public static int test() {
    try {
    	return 5;
    }
    finally {
    	return 6;
    }
}
```

–§—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω–µ—Ç `6`. –ú—ã –∑–∞—Ö–æ–¥–∏–º –≤ `try` –±–ª–æ–∫ –∏ —Å–æ–±–∏—Ä–∞–µ–º—Å—è –≤–µ—Ä–Ω—É—Ç—å `5`. –ü–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç `return`, –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –±–ª–æ–∫ `finally`.







#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```java
public class PoolComposerPrincipalEventIdentifier {
    private static final Logger LOG = Logger.getLogger(
    	PoolComposerPrincipalEventIdentifier.class.getName()
    );

    public void identifyPrincipalEvent() {
        try {
        	doIdentifyPrincipalEventUsingPoolComposer();
        }
        catch(Exception ex) {
        	LOG.log(Level.SEVERE, "Error while identifying principal event", ex);
        }
    }
}
```







### –ù–∞–¥—Ç–∏–ø—ã –∏ –ø–æ–¥—Ç–∏–ø—ã

–ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —è–≤–ª—è–µ—Ç—Å—è *–Ω–∞–¥—Ç–∏–ø–æ–º*, –∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–ª–∞—Å—Å -- *–ø–æ–¥—Ç–∏–ø–æ–º*. 

–ï—Å–ª–∏ –∫–ª–∞—Å—Å $A$ —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å $B$, —Ç–æ $B$ -- —ç—Ç–æ *–Ω–∞–¥—Ç–∏–ø*, –∞ $A$ -- —ç—Ç–æ *–ø–æ–¥—Ç–∏–ø*. 

–ù–∞–¥—Ç–∏–ø—ã –∏ –ø–æ–¥—Ç–∏–ø—ã –æ–±—Ä–∞–∑—É—é—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ. –ù–∞ –Ω–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —á–∞—Å—Ç–∏—á–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫. 

–ù–∞–¥—Ç–∏–ø –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π,
—á–µ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–∏–ø (–≤–æ–æ–±—â–µ, –∫–∞–∂–µ—Ç—Å—è, —ç—Ç–æ, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ. –£ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –≤—Å–µ–≥–¥–∞ –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, —á–µ–º —É –∫–ª–∞—Å—Å–æ–≤, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è). –ü–æ–¥—Ç–∏–ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–µ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏, –∞ –Ω–∞–¥—Ç–∏–ø -- –±–æ–ª—å—à–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏.

`A extends B` -- `A` —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º `B`.

`A super B` -- `A` —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–¥—Ç–∏–ø–æ–º `B`. 

–ï—Å–ª–∏ —Ç–∏–ø `Derived` —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º  `Base`, —ç—Ç–æ –Ω–µ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ `Myclass<Derived>` –±—É–¥–µ—Ç –ø–æ–¥—Ç–∏–ø–æ–º `MyClass<Base>`.





#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `extends`

```java
static double getDoubleValue(Shmoption<Number> shmopt) {
	return shmopt.get().doubleValue();
}

getDoubleValue(new IntegerShmoption(123));
```

–ù–µ —Å–∫–æ–º–ø–∏–ª–∏—Ç—Å—è, —Ñ—É–Ω–∫—Ü–∏—è –æ–∂–∏–¥–∞–µ—Ç –∫–ª–∞—Å—Å —Å —Ç–∏–ø–æ–º `Number`, –∞ –Ω–µ `Integer`. 

```java
static double getDoubleValue(Shmoption<? extends Number> shmopt) {
	return shmopt.get().doubleValue();
}

getDoubleValue(new IntegerShmoption(123));
// –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ç–∏–ø –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ -- Integer. 
```

–¢–µ–ø–µ—Ä—å –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ -- —ç—Ç–æ –∫–ª–∞—Å—Å –ª—é–±–æ–≥–æ —Ç–∏–ø–∞, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º `Number`.





####  –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `super`

```java
static void setInteger(Shmoption<Integer> shmopt) {
	shmopt.set(42);
}

NumberShmoption<Number> n = new NumberShmoption<>(123.45);
setInteger(n);
```

–ù–µ —Å–∫–æ–º–ø–∏–ª–∏—Ç—Å—è. –§—É–Ω–∫—Ü–∏—è –æ–∂–∏–¥–∞–µ—Ç –∫–ª–∞—Å—Å —Ç–∏–ø–∞ `Integer`.

```java
static void setInteger(Shmoption<? super Integer> shmopt) {
shmopt.set(42);
}
NumberShmoption<Number> n = new NumberShmoption<>(123.45);
setInteger(n);
```

–î–¢–µ–ø–µ—Ä—å –≤ —Ñ—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–ª–∞—Å—Å —Å —Ç–∏–ø–æ–º, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–¥—Ç–∏–ø–æ–º `Integer`. –ù–∞–ø—Ä–∏–º–µ—Ä, `Double`. 







### Covariant return type

–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å -- —ç—Ç–æ –ø—Ä–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤. 

```java
interface Supplier {
	Object get();
}

interface StringSupplier extends Supplier {
    @Override
    String get();
}
```







### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–∏–ø–æ–≤

–î–∂–µ–Ω–µ—Ä–∏–∫–∏ -- –∫–ª–∞—Å—Å—ã, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –æ–±–æ–±—â–µ–Ω–Ω—ã–º–∏. –¢–∏–ø –¥–∂–µ–Ω–µ—Ä–∏–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º (–ø–æ—ç—Ç–æ–º—É —Å—É—â–µ—Å—Ç–≤—É—é—Ç –æ–±–µ—Ä—Ç–∫–∏ `Integer`, `Long`, etc).



**–ü—Ä–∏–º–µ—Ä**

```java
static class Option<T> {
    private T value;
    
    public Option(T value) { this.value = value; }
    
    /** Never returns null */
    public T get() {
        if(value == null) throw new NoSuchElementException();
        return value;
    }
    public T orElse(T other) { return value == null ? other : value; }
    public boolean isPresent() { return value != null; }
}

public static void main(String[] args) {
    Option<String> aboba = new Option<String>("aboba");
    
    Option<String> abobaImplicit = new Option<>("aboba"); 
    // –≤ –¥–∂–∞–≤–µ 8 –ø—Ä–∏–¥—É–º–∞–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä —Ä–æ–º–±:)
    // –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
    
    Option<String> abobaImplicit = new Option("aboba"); 
    // raw type. –ú–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `<>`. 
    // –Ω—É–∂–Ω–æ –∏–∑–±–µ–≥–∞—Ç—å –∏—Ö, –∫–∞–∫ –æ–≥–Ω—è
}
```

```java
public static void main(String[] args) {
	Option<String> abobaImplicit = new Option<>("aboba"); 
    
    Option<var> abobaImplicit = new Option<>("aboba");
    // –±—ã–≤–∞—é—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω—É–∂–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ç–∏–ø. 
    // –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å—Ç–∞–≤–∏—Ç —Ç–∏–ø Object –≤–º–µ—Å—Ç–æ String. 
    // –ü–æ—ç—Ç–æ–º—É –¥–µ—Ç–∏, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ `var` –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä `<>`.
}                                                      

```





##### –ú–∞—Å–∫–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ç–∏–ø

`?` (wildcard)

`?` $\Leftrightarrow$ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫–æ–π-—Ç–æ —Ç–∏–ø, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å `Object`. 

```java
static class Shmoption<T> {
    T value;
    public Shmoption(T value) { this.value = value; }\
    public T get() {
        if(value == null) throw new NoSuchElementException();
        return value;
    }
    public void set(T newValue) { value = newValue; }
    public T orElse(T other) { return value == null ? other : value; }
    public boolean isPresent() { return value != null; }
}

public static void main(String[] argv) {
    Shmoption<?> present = new Shmoption<>("yes");
    
	System.out.println(present.isPresent()); // –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
    
	Object value = present.get(); // –≤–µ—Ä–Ω–µ—Ç –∫–∞–∫–æ–π-—Ç–æ —Ç–∏–ø, –Ω–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π. 
                                  // –ù–æ –º—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫ `Object`
    
	present.set(???);  // —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å null. 
                       // –¢–∏–ø —É –æ–±—ä–µ–∫—Ç–∞ `present` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, –æ–Ω —Ç–∞–∫ –∏ –æ—Å—Ç–∞–µ—Ç—Å—è `?`.
}
```

–ï—Å–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∫—É—Ä—Å–æ—Ä –º–µ–∂–¥—É —Å–∫–æ–±–æ—á–∫–∞–º–∏ –∏ –Ω–∞–∂–∞—Ç—å `ctrl+P`, —Ç–æ –∏–¥–µ—è –ø–æ–∫–∞–∂–µ—Ç, –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –æ–∂–∏–¥–∞—é—Ç—Å—è 0_0





###### `? extends Number`

```java
public static void main(String[] argv) {
    Shmoption<? extends Number> number = new Shmoption<>(123);
	Number n = number.get();
	number.set(124);
}
```

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ç–∏–ø –≤—Å—ë –µ—â–µ –Ω–µ –∏–∑–≤–µ—Å—Ç–µ–Ω, –Ω–æ –º—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ–º, —á—Ç–æ –æ–Ω —á–∏—Å–ª–æ–≤–æ–π. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–µ—Ç–æ–¥ `get()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ `Object`, –∞ `Number`. 





##### –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

```java
// –Ω–∞—Å–ª–µ–¥–Ω–∏–∫ —Ç–∏–ø–∞ Number
class NumberShmoption<N extends Number> extends Shmoption<N> {
	public NumberShmoption(N value) { super(value); }
}

// –Ω–∞—Å–ª–µ–¥–Ω–∏–∫ —Ç–∏–ø–∞ Integer
class IntegerShmoption extends NumberShmoption<Integer> {
	public IntegerShmoption(Integer value) { super(value); }
}
```







#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤

–ß–∞—â–µ –≤—Å–µ–≥–æ –¥–µ–ª–∞—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã. 

```java
static <T> String returnString(T value) {
    return value.toString();
}
```

```java
static <T> void setNotNull(Shmoption<? super T> shmoption, T value) {
	if (value == null) throw new IllegalArgumentException();
	shmoption.set(value);
}

setNotNull(n, 123);
ShmoptionUtils.<Number>setNotNull(n, 123);
```

 –¢–∏–ø —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ï—Å–ª–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ —Ç–∏–ø, –µ–≥–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ `<>`, –ø—Ä–∏ —ç—Ç–æ–º –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—à—Ç—É–∫–∞ –¥–æ —Ç–æ—á–∫–∏, –º–æ–∂–µ—Ç –±—ã—Ç—å `this` –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞, –µ—Å–ª–∏ –º–µ—Ç–æ–¥ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π). 





#### –î–∂–µ–Ω–µ—Ä–∏–∫–∏ –∏ –º–∞—Å—Å–∏–≤—ã

–ü–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ç—Å—è –Ω–µ –ø–æ—Ç–Ω—è–Ω–æ –ø–æ—á–µ–º—É. 

–í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –±–∞–π—Ç–∫–æ–¥–µ –Ω–µ –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω —Ç–∏–ø

```java
Shmoption<Integer>[] arrayInt = new Shmoption<Integer>[10]; // does not compile
Shmoption<?>[] array = new Shmoption<?>[10]; // OK
```

–ï—â–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ -- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—ã—Ä—ã—Ö —Ç–∏–ø–æ–≤:

```java
Shmoption<Integer>[] arrayInt = new Shmoption[10]; // raw-type. –ü–æ–ª—É—á–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
Object[] obj = arrayInt;
obj[0] = new Shmoption<>("foo");
Shmoption<Integer> shmoption = arrayInt[0];
Integer x = shmoption.get(); // ClassCastException: –≤ `arrayInt[0]` –ª–µ–∂–∏—Ç `String`
System.out.println(x);
```





### –°—Ç–∏—Ä–∞–Ω–∏–µ (erasure)

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç–∏–ø–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç (—Å—Ç–∏—Ä–∞—é—Ç—Å—è). –ï—Å—Ç—å —Å–∞–º–∏ –∫–ª–∞—Å—Å—ã, –Ω–æ –æ–Ω–∏ –Ω–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ã —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã. 

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ–¥–µ `return (T)obj`; –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `return obj;`), —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏—Å–ø–ª—é—á–µ–Ω–∏—é `ClassCastException`. 



#### –ü—Ä–∏–º–µ—Ä

```java
Shmoption<Integer> integer = new Shmoption<>(10);

Shmoption<String> string = ((Shmoption<String>) integer); 
// –æ—à–∏–±–∫–∞: `Integer` –∏ `String` –≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ç–∫–∞—Ö –∏–µ—Ä–∞—Ä—Ö–∏–∏

Shmoption<?> any = integer;
Shmoption<String> string2 = (Shmoption<String>) any; 
// —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ,
// –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –±–∞–π—Ç–∫–æ–¥–µ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ `string2 = any`

String s = string2.get(); 
// ClassCastException: –≤–Ω—É—Ç—Ä–∏ `string2` –∂–∏–≤–µ—Ç `Integer`, –∞ –Ω–µ `String`

NumberShmoption<Integer> number = (NumberShmoption<Integer>)integer; 
// OK
```









## 23-03-02

### `varags`

–ü–µ—Ä–µ–º–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

```java
static void printAll(Object... objects) {
    for (Object object : objects) {
    	System.out.println(object);
	}
}

printAll("a", 1, "b", 2.0);

Object[] objects = {"a", 1, "b", 2.0};
printAll(objects);

printAll(null, null); // OK. An array of nulls
printAll(null); // does not compile. 
```





#### varargs + generics

```java
static <T> boolean isOneOf(T value, T... options) {
    for (T option : options) {
    	if (Objects.equals(value, option)) return true;
    }
    return false;
}
```

`Objects.equals` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ `equals` –æ–±—ä–µ–∫—Ç–∞, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç –Ω–µ `null`, –ø–æ—Ç–æ–º –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥. 

–ò—Å–ø–æ–ª—å–∑—É—è `varargs` –∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ –≤ –º–µ—Ç–æ–¥–µ, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤–æ—Ä–Ω–∏–Ω–≥ —Ç–∏–ø–∞ `unchecked generic array creation for varargs parameter`. –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –Ω–µ –¥–µ–ª–∞–µ—Ç –Ω–∏—á–µ–≥–æ –ø—Ä–æ—Ç–∏–≤–æ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ, –µ–≥–æ –º–æ–∂–Ω–æ –ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å –ø–æ–º–æ—â—å—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@SafeVarargs`:

```java
@SafeVarargs
static <T> boolean isOneOf(T value, T... options) {
    for (T option : options) {
    	if (Objects.equals(value, option)) return true;
    }
    return false;
}

isOneOf(shmoption, new Shmoption<>("foo"),
				   new Shmoption<>("bar"));
```







### Collections

####  –ò–µ—Ä–∞—Ä—Ö–∏—è

–ñ–µ–ª—Ç—ã–º –æ—Ç–º–µ—á–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∑–µ–ª–µ–Ω—ã–º -- –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã, —Å–µ—Ä—ã–º -- –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–∫–ª–∞—Å—Å—ã –∏–ª–∏ –º–µ—Ç–æ–¥—ã). 

<img src="./pics for conspects/JA/JA 23-03-04 1.png" alt="JA 23-03-04 1" style="zoom:67%;" />







#### –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π read & write 

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã –≤ —Ü–∏–∫–ª–µ  `for` –æ–±—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å —ç—Ç–∏–º –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∫–æ–ª–ª–µ–∫—Ü–∏—é, –≤—ã–ª–µ—Ç–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `ConcurrentModificationException`:

```java
import java.util.List;
import java.util.ArrayList;

public class MyClass {
    public static void main(String[] args) {
        List<Integer> list = new ArrayList<>(List.of(1, 2, 3));
        for (Integer a : list) {
            System.out.println(a);
            list.add(4);
        }
    }
}
```

```asciiarmor
Exception in thread "main" java.util.ConcurrentModificationException
	at java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)
	at java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)
	at MyClass.main(MyClass.java:7)
```







#### –ù–µ –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 

‚úìEnumeration -> Iterator

‚úìVector -> ArrayList

‚úìStack -> ArrayDeque

‚úìDictionary -> Map

‚úìHashtable -> HashMap

‚úìLinkedList -> ArrayList/ArrayDeque

–£ —à—Ç—É–∫ —Å–ª–µ–≤–∞ —Å—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª–≥–æ. 









## 23-03-16

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ (single abstract method -- SAM). –ú–æ–∂–µ—Ç –±—ã—Ç—å –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ `@FunctionalInterface` (—Ç–æ–≥–¥–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π). 

–ü—Ä–∏–º–µ—Ä SAM -- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Runnable` —Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥–æ–º `Run()`. –î—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä -- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Function`, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å–µ–≥–æ 4 –º–µ—Ç–æ–¥–∞, –Ω–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω. 

–ï—â–µ –ø—Ä–∏–º–µ—Ä (–Ω–µ–æ—á–µ–≤):

```java
@FunctionalInterface
interface LongSupplier {
	long getLong(); // sam, since not implemented
}

@FunctionalInterface
interface IntSupplier extends LongSupplier {
    int getInt(); // sam, since not implemented
    @Override
    default long getLong() { return getInt(); }
}
```

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IntSupplier` —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `getLong()`. –ù–æ –≤–Ω—É—Ç—Ä–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π (–∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π) –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `getInt()`, –ø–æ—ç—Ç–æ–º—É `IntSupplier` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. 





### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

–≠–∫–∑–µ–º–ø–ª—è—Ä—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π. 

–£ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ–Ω–æ –Ω–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ -- —ç—Ç–æ –≤—Å–µ–≥–¥–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–∫–æ–≥–æ-—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. 

–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —è–≤–Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω, –ø–æ—ç—Ç–æ–º—É –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (aka [–ø–æ–ª–∏–≤—ã—Ä–∞–∂–µ–Ω–∏—è](https://vaskoz.wordpress.com/2013/08/15/jsr335-poly-expressions/)). –ï—Å—Ç—å –¥–≤–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–∞: 

- –ª—è–º–±–¥–∞ ($\texttt{(a, b)} \textcolor{red}{\texttt{\ ->\ }} \texttt{a + b}$) 
- —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–µ—Ç–æ–¥ ($\texttt{Integer} \textcolor{red}{\texttt{::}} \texttt{sum}$)



–ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π. –û–¥–Ω–æ –∏ —Ç–æ –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞. 

–ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å `getClass()` —É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π. –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∫–ª–∞—Å—Å–∞. 

–ö–æ—Ä–æ—á–µ, –º–µ—Ç–æ–¥—ã –≤—Ä–æ–¥–µ `getClass()`, `toString()` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º. 





#### –ü—Ä–∏–º–µ—Ä—ã

```java
public static void main(String[] args) {
	Runnable r = () -> System.out.println("Hello World!");
	r.run();
}
```

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ -- –ª—è–º–±–¥–∞ -- –ø—Ä–∏—Å–≤–æ–∏–ª–∞—Å—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `r`. 

–í —Å—Ç—Ä–æ–∫–µ `r.run()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ—Ç —Å–∞–º—ã–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –º–µ—Ç–æ–¥ `run()`).



–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Ç–∏–ø –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —è–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–ª—Å—è. 

```java
static void run(Runnable r) { 
    r.run(); 
}
public static void main(String[] args) {
	run(() -> System.out.println("Hello World!"));
}
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ç–∏–ø –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –¥–ª—è –ª—è–º–±–¥—ã, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `run(Runnable)`. 







### –õ—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏—è

- –∞—Ä–≥—É–º–µ–Ω—Ç—ã: `(type1 name1, type2 name2)`, `()`
- —Å—Ç—Ä–µ–ª–æ—á–∫–∞: `->`
- —Ç–µ–ª–æ 
  - –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: `System.out.ptintln("aboba");`
  - –±–ª–æ–∫: `{ System.out.ptintln("aboba"); }`





#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- Void-compatible (void SAM):
  - –í—ã—Ä–∞–∂–µ–Ω–∏–µ: –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –≤ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ (–≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞, –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –∏ —Ç. –¥.)
  - –ë–ª–æ–∫: –∫–∞–∂–¥—ã–π return –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è

- Value-compatible (non-void SAM):
  - –í—ã—Ä–∞–∂–µ–Ω–∏–µ: –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ void
  - –ë–ª–æ–∫: –∫–∞–∂–¥—ã–π return —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.





#### –ó–∞—Ö–≤–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–π

1. –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

   –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `effectively final` –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ –ª—è–º–±–¥—ã. 

   –í –ª—è–º–±–¥—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è *–∑–Ω–∞—á–µ–Ω–∏–µ* –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. 

   

2. –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞:

   –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ `this`. 

   

3. –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ: 

   –ù–∏—á–µ–≥–æ –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è, —Ç–µ–ª–æ –ª—è–º–±–¥—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è stateless. –¢–∞–∫ –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è, –µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏. 

   –ü—Ä–∏–º–µ—Ä: 

   ```java
   import java.util.ArrayList;
   import java.util.List;
   import java.util.function.IntSupplier;
   
   public class Demo {
       static int x = 5;
       public static void main(String[] args) {
           List<IntSupplier> List = new ArrayList<>();
           for (int i = 0; i < 5; i++) {
               x++;
               IntSupplier l1 = () -> x * x;
               List.add(l1);
           }
           for (IntSupplier elem : List) {
           	System.out.println(elem.getAsInt());
           }
       }
   }
   ```

   –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `x` —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å –Ω–∞ 5. –í —Å—Ç—Ä–æ–∫–∞—Ö 14-16 –µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –ª—è–º–±–¥—ã. 

   –í—ã–≤–æ–¥:

   ```shell
   100
   100
   100
   100
   100
   ```





##### –ü—Ä–∏–º–µ—Ä

–•–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª—è–º–±–¥, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. 

```java
import java.util.ArrayList;
import java.util.List;
import java.util.function.IntSupplier;

public class Demo {
    public static void main(String[] args) {
        int x = 1;
        List<IntSupplier> List = new ArrayList<>();
        for (int i = 0; i < 5; i++) {
            int xx = x++;
            IntSupplier l1 = () -> xx * xx;
            List.add(l1);
        }
        for (IntSupplier elem : List) {
        	System.out.println(elem.getAsInt());
        }
    }
}
```

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `xx` —è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –ª—è–º–±–¥—ã effectively final, –≤ –Ω–µ–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `x`. –õ—è–º–±–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –∑–∞—Ö–≤–∞—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `xx`. 

–í—ã–≤–æ–¥:

```shell
1
4
9
16
25
```







### Optional\<T\>

–ö–æ—Ä–æ–±–æ—á–∫–∞ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π. –ú–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ä–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –µ—Å—Ç—å –ª–∏ —á—Ç–æ-—Ç–æ –≤–Ω—É—Ç—Ä–∏:

```java
// filter(Predicate<T>)
boolean isFooEqualsBar = Optional.of("foo").filter("bar"::equals).isPresent();

// <U> map(Function<T, U>)
String trimmed = Optional.of(" foo ").map(String::trim).get();

// <U> flatMap(Function<T, Optional<U>>)
Integer num = Optional.of("1234").flatMap(x -> toInteger(x)).orElse(-1);

// orElseGet(Supplier<T>)
Double random = Optional.<Double>empty().orElseGet(Math::random);

// <X extends Throwable> orElseThrow(Supplier<T>) throws X
Double random = Optional.<Double>empty().orElseThrow(Exception::new);

//or(Supplier<? extends Optional<? extends T>>)
getOneOptional().or(() -> getAnotherOptional());
```





#### –ü—Ä–∏–º–µ—Ä 1: update karma

```java
interface User {
    String name();
    boolean isActive();
	void updateCarma(int delta);
}

interface UserRepository {
	Optional<User> findUser(String name);
}

void increaseUserCarma(UserRepository repository, String name) {
    repository.findUser(name)
        .filter(User::isActive)
        .ifPresent(user -> user.updateCarma(1));

}
```

–•–æ—Ç–∏–º –ø–æ –∏–º–µ–Ω–∏ –Ω–∞–π—Ç–∏ —é–∑–µ—Ä–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —é–∑–µ—Ä–æ–≤. –ï—Å–ª–∏ –æ–Ω –∞–∫—Ç–∏–≤–Ω—ã–π, —É–ª—É—á—à–∏–º –∫–∞—Ä–º—É. –ò–Ω–∞—á–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º. 





#### –ü—Ä–∏–º–µ—Ä 2: update + throw

```java
interface User {
    String name();
    boolean isActive();
    void updateCarma(int delta);
}

interface UserRepository {
	Optional<User> findUser(String name);
}

void increaseUserCarma(UserRepository repository, String name) {
    repository.findUser(name)
        .filter(User::isActive)
        .orElseThrow(() -> new IllegalArgumentException("No such user: "+name))
        .updateCarma(1);
}
```

–ù–∞—Ö–æ–¥–∏–º —é–∑–µ—Ä–∞ –ø–æ –∏–º–µ–Ω–∏. –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏, –∫–∏–¥–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –∏ –æ–Ω –∞–∫—Ç–∏–≤–Ω—ã–π, —É–ª—É—á—à–∞–µ–º –∫–∞—Ä–º—É. 







### Stream API

–ò–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `java.util.stream`. 

–ï—Å—Ç—å 

- –∏—Å—Ç–æ—á–Ω–∏–∫ (—Å–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä–∏–º)
- –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ñ–æ—Ä–º–∏—Ä—É—é—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–º–∞–Ω–¥, –Ω–æ —Å–∞–º–∏ –∫–æ–º–º–∞–Ω–¥—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç. –ö–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—è, –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
- —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ)

–°—É—â–µ—Å—Ç–≤—É—é—Ç `Stream`, `IntStream`, `LongStream`, `DoubleStream`. 







#### –ò—Å—Ç–æ—á–Ω–∏–∫–∏

```java
Stream.empty();

Stream.of(x, y, z);  // –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

// –µ—Å–ª–∏ null, –≤–µ—Ä–Ω–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å—Ç—Ä–∏–º 
// –µ—Å–ª–∏ –Ω–µ null, –≤–µ—Ä–Ω–µ—Ç—Å—è —Å—Ç—Ä–∏–º –∏–∑ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
Stream.ofNullable(x);

// –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å—Ç—Ä–∏–º
Stream.generate(Math::random);
    
// —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç  –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ 
// val -- –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 
Stream.iterate(val, x -> x+1);
    
// —Ç–æ –∂–µ, –Ω–æ –≤ —É—Å–ª–æ–≤–∏–µ–º 
Stream.iterate(0, x -> x < 100, x -> x + 1);

// –ª—é–±—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –º–æ–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ —Å—Ç—Ä–∏–º 
collection.stream();

// –º–∞—Å—Å–∏–≤ –º–æ–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ —Å—Ç—Ä–∏–º
// –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∏–ø int, long, double –∏–ª–∏ Object
// —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —É–ø—Å
Arrays.stream(array);

// —Å—Ç—Ä–∏–º —á–∞—Ä–æ–≤, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ —Å—Ç—Ä–æ–∫–∏
// –≤–Ω—É—Ç—Ä–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–µ —Å–∏–º–≤–æ–ª—ã, –∞ –∏—Ö —á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è 
String.chars();

// –∫–∞–∫ –ª–µ–Ω–∏–≤—ã–π —Å—Ç—Ä–∏–º. –•–æ—Ä–æ—à –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
Pattern.splitAsStream();
```







#### –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

| —â–ø–µ—Ä–∞—Ü–∏–∏       | –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏                                                  |
| -------------- | ------------------------------------------------------------ |
| map            | –ò–∑ —Å—Ç—Ä–∏–º–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å—Ç—Ä–∏–º. –ï—Å—Ç—å mapToInt, mapToLong, mapToDouble, mapToObj, –ø—Ä–µ–¥–≤—Ä–∞—â–∞—é—Ç —Å—Ç–∞—Ä—ã–π —Ç–∏–ø –≤ –Ω–æ–≤—ã–π –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è. |
| filter         | –í—ã–∫–∏–¥—ã–≤–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –ø—Ä–µ–¥–∏–∫–∞—Ç—É. –ù–µ –º–µ–Ω—è–µ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω—É—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å |
| flatMap        | –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–∏–º —Å—Ç—Ä–∏–º–æ–≤ –≤ —Å—Ç—Ä–∏–º. E—Å—Ç—å flatMapToInt, flatMapToLong, flatMapToDouble |
| mapMulti       | mapMultiToInt, mapMultiToLong, mapMultiToDouble              |
| distinct       | –ò–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤                        |
| sorted         | –°–æ—Ä—Ç–∏—Ä—É–µ—Ç                                                    |
| limit          | –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å—Ç—Ä–∏–º–µ                   |
| skip           | –°–∫–∏–ø–∞–µ—Ç –ø–µ—Ä–≤—ã–µ —Å–∫–æ–ª—å–∫–æ-—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤                          |
| peek           | –ú–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∫ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Å—Ç—Ä–∏–º–µ |
| takeWhile      | –ë–µ—Ä–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã, *–ø–æ–∫–∞* –æ–Ω–∏ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç —É—Å–ª–æ–≤–∏—é (–ø—Ä–µ–¥–∏–∫–∞—Ç—É). |
| dropWhile      | –°–∫–∏–ø–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã, *–ø–æ–∫–∞* –æ–Ω–∏ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç —É—Å–ª–æ–≤–∏—é (–ø—Ä–µ–¥–∏–∫–∞—Ç—É). |
| boxed          | –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–∏–º –≤ —Å—Ç—Ä–∏–º –æ—Ç `Integer`.                       |
| asLongStream   |                                                              |
| asDoubleStream |                                                              |





##### –ü—Ä–∏–º–µ—Ä `peek`

```java
long count = Stream.of(1,2,3,4,5)
    .peek(System.out::println)
    .count();
```

–í —Å—Ç–∞—Ä—à–∏—Ö –≤–µ—Ä—Å–∏—è—Ö –¥–∂–∞–≤—ã –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, `peek`) –º–æ–≥—É—Ç —Å–∫–∏–ø–∞—Ç—å—Å—è, –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑–≤–µ—Å—Ç–µ–Ω –∑–∞—Ä–∞–Ω–µ–µ.

–ó–¥–µ—Å—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á–µ–º—É —Ä–∞–≤–µ–Ω `count`.





##### –ü—Ä–∏–º–µ—Ä `flatMap`

```java
List<List<String>> listOfLists =
	List.of(List.of("foo", "bar", "baz"),
	List.of("Java", "Kotlin", "Groovy"),
	List.of("Hello", "Good Bye"));

System.out.println(listOfLists.stream()
    .flatMap(List::stream) // —Å—Ç—Ä–∏–º —Å—Ç—Ä–∏–º–æ–≤ -> —Å—Ç—Ä–∏–º
    .anyMatch("Java"::equals));
```



##### –ü—Ä–∏–º–µ—Ä, –∫–∞–∫ –Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å: shuffle

–•–æ—Ç–∏–º —Ä–∞–Ω–¥–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ —Å—Ç—Ä–∏–º–µ. –¢–∞–∫ –ø–ª–æ—Ö–æ:

```java
IntStream.range(1, 10)
    .boxed()
    .sorted((a, b) -> Math.random() > 0.5 ? 1 : -1)
    .forEach(System.out::println);
```

` .boxed()` -- –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –∏–Ω—Ç—ã –≤ `Integer`, —Ç–æ–ª—å–∫–æ —Ç–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä

`.sorted()` -- –ø–µ—Ä–µ–¥–∞–µ–º –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä



–ü—Ä–æ–±–ª–µ–º–∞: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ $10 \rightarrow 50$ –Ω–∞—Ä—É—à–∞–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç (–∫–∞–∫–æ–π-—Ç–æ). –ö–∞–∫–æ–π-—Ç–æ —Ç–∞–º –∞–ª–≥–æ—Ä–∏—Ç–º –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∏ –≤—Å–µ –≤–∑—Ä—ã–≤–∞–µ—Ç—Å—è.

–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ -- —á–µ—Ä–µ–∑ `Collections`:

```java
List<Integer> list = 
    IntStream.range(1, 50)
		.boxed()
    	.collect(Collectors.toList());

Collections.shuffle(list);

list.forEach(System.out::println);
```





##### –ü—Ä–∏–º–µ—Ä, –∫–∞–∫ –Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å: –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

```java
IntStream.iterate(1, x -> x * 2)
    .sorted()
    .limit(10)
    .forEach(System.out::println);
```

–£–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—ã—Ç–∞–µ–º—Å—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:

```java
IntStream.iterate(1, x -> x * 2)
    .limit(10)
    .sorted()
    .forEach(System.out::println);
```







#### –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

‚úìcount (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `long`)

‚úìfindFirst/findAny -> Optional

‚úìanyMatch/noneMatch/allMatch

‚úìforEach/forEachOrdered

‚úìmax/min -> Optional

‚úìreduce

‚úìcollect

‚úìtoArray

‚úìtoList (Java 16+)

‚úìsum/average/summaryStatistics (–º–∏–Ω, –º–∞–∫—Å, —Å—Ä–µ–¥–Ω–µ–µ) (–ø—Ä–∏–º–∏—Ç–∏–≤—ã)





##### –ü—Ä–∏–º–µ—Ä `anyMatch`

```java
boolean hasOption = Stream.of(args)
    .filter(x -> x.startsWith(PREFIX))
    .findFirst()
    .isPresent();
```

–ú–æ–∂–Ω–æ –ø—Ä–æ—â–µ:

```java
boolean hasOption = Stream.of(args).anyMatch(x -> x.startsWith(PREFIX));
```





##### –ü—Ä–∏–º–µ—Ä `reduce`

–§—É–Ω–∫—Ü–∏—è —Ä–µ–¥—É–∫—Ü–∏–∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∫–æ–π-—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω–æ–π –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º.

```java
static BigInteger factorial(int n) {
    return IntStream.rangeClosed(1, n)
        .mapToObj(BigInteger::valueOf)
        .reduce(BigInteger.ONE, BigInteger::multiply);
}
```

–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç `reduce` -- –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –í –∫–æ–¥–µ `1` -- –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —É–º–Ω–æ–∂–µ–Ω–∏—è: `1 * 1 = 1`. 

–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç `reduce` -- –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ª—è–º–±–¥–æ–π, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–π –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. 



Dont overreduce! –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫—É—á—É –º—É—Å–æ—Ä–∞ –≤ –≤–∏–¥–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. 







#### Collectors

–°–ø–æ—Å–æ–± –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `.collect()`. 

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å. 

–ú–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–ª–ª–µ–∫—Ç–æ—Ä (`Collector.of`). 



‚úì**toList()** -- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `ArrayList`

‚úì**toSet()**

‚úì**toCollection(supplier)** -- —Å–æ–∑–¥–∞–µ—Ç –ø—É—Å—Ç—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, –ø—Ä–∏–º–µ—Ä: `toCollection(ArrayList::new)`

‚úì**toMap(keyMapper, valueMapper[, merger[, mapSupplier]])** -- –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏: –æ–¥–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç –∫–ª—é—á–∏ –º–∞–ø—ã, –¥—Ä—É–≥–∞—è -- –∑–Ω–∞—á–µ–Ω–∏—è. –ï—Å–ª–∏ –∫–ª—é—á–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–∏–¥–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è —ç—Ç–æ–≥–æ –∏–∑–±–µ–∂–∞—Ç—å, –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç—Ä–µ—Ç—å—è —Ñ—É–Ω–∫—Ü–∏—è, —Ä–µ—à–∞—é—â–∞—è –∫–æ–ª–ª–∏–∑–∏–∏. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ç–≤–µ—Ä—Ç—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±–µ—Ä–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–∞–ø—ã (`HashTable::new` –∏–ª–∏ `TripleMap::new`)

‚úì**joining([separator[, prefix, suffix]])** -- —Å–∫–ª–µ–∏–≤–∞–µ—Ç *—Å—Ç—Ä–æ–∫–∏*. –ï—Å—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ü–µ—Ä–≤—ã–π -- —ç—Ç–æ —Å–µ–ø–∞—Ä–∞—Ç–æ—Ä. –í—Ç–æ—Ä–æ–π -- —ç—Ç–æ –ø—Ä–µ—Ñ–∏–∫—Å. –¢—Ä–µ—Ç–∏–π -- —Å—É—Ñ—Ñ–∏–∫—Å. –ü—Ä–∏–º–µ—Ä: `joining(',', '(', ')')`

‚úì**groupingBy(classifier[[, mapSupplier], downstream])** -- –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –∫–ª—é—á–∞–º. –ü–µ—Ä–≤—ã–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç -- –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä -- –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–ª—é—á–µ–π. –í—Ç–æ—Ä–æ–π –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π -- —Å–ø–æ—Å–æ–± –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–ª—é—á. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ç–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤. –í –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è <u>–¥–≤–µ</u> –≥—Ä—É–ø–ø—ã —Å –∫–ª—é—á–æ–º `true` –∏ —Å –∫–ª—é—á–æ–º `false`, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö –ø—É—Å—Ç–∞—è.

‚úì**partitioningBy(predicate[, downstream])** -- —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å `groupingBy`, –Ω–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –±–µ—Ä–µ—Ç—Å—è –ø—Ä–µ–¥–∏–∫–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` –∏–ª–∏ `false`. –ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç (–ø—Ä–µ–¥–∏–∫–∞—Ç) –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π. 

‚úì**reducing/counting/mapping/minBy/maxBy**

‚úì**averagingInt/averagingLong/averagingDouble**

‚úì**summingInt/summingLong/summingDouble**







##### –ü—Ä–∏–º–µ—Ä—ã

###### –ü—Ä–∏–º–µ—Ä: –≥—Ä—É–ø–ø–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫–∏ –ø–æ –¥–ª–∏–Ω–µ 

–•–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å –º–∞–ø—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–ª—é—á–∏ -- —ç—Ç–æ –¥–ª–∏–Ω–∞, –∑–Ω–∞—á–µ–Ω–∏—è -- —Å—Ç—Ä–æ–∫–∏ —ç—Ç–æ–π –¥–ª–∏–Ω—ã. 

```java
static Map<Integer, String> stringsByLength(List<String> list) {
    return list.stream().collect(
        Collectors.groupingBy(String::length, Collectors.joining(","))
    );
}

stringsByLength(Arrays.asList("a", "bb", "c", "dd", "eee"));
// {1=a,c, 2=bb,dd, 3=eee}
```







###### –ü—Ä–∏–º–µ—Ä: –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã 

–°–Ω–∞—á–∞–ª–∞ –≥—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –¥–ª–∏–Ω–µ, –ø–æ—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∫–ª—é—á–æ–º –≥—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø–µ—Ä–≤–æ–π –±—É–∫–≤–µ.

```java
static Map<Integer, Map<Character, List<String>>>
	stringsByLengthAndFirstLetter(List<String> list) {
    return list.stream().collect(
        Collectors.groupingBy(
            String::length,
            Collectors.groupingBy(s -> s.charAt(0)))
    );
}
stringsByLengthAndFirstLetter(Arrays.asList("a", "b", "aa", "ab", "ba"));
//{1={a=[a], b=[b]}, 2={a=[aa, ab], b=[ba]}}
```







###### –ü—Ä–∏–º–µ—Ä `toMap`

–•–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –º–∞–ø—É, –≥–¥–µ –∫–ª—é—á–∏ -- –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∑–Ω–∞—á–µ–Ω–∏—è -- –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. 

```java
interface Book {
	String getCategory();
	int getPrice();
}

static Map<String, Integer> getLowestBookPriceByCategory(List<Book> list) {
	return list.stream().collect(Collectors.toMap(
        Book::getCategory, 
        Book::getPrice,
        BinaryOperator.minBy(Comparator.naturalOrder())
    ));
}
```

–ö–ª—é—á–∏ -- `Book::getCategory`, –∑–Ω–∞—á–µ–Ω–∏—è -- `Book::getPrice`. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ—Å–∫–æ–ª—å–∫–æ, –ø—Ä–∏–º–µ–Ω—è–µ–º —Å–∞–ø–ø–ª–∞–π–µ—Ä `BinaryOperator.minBy()`.





##### –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω –∫–æ–ª–ª–µ–∫—Ç–æ—Ä

–≠—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —á–µ—Ç—ã—Ä–µ –º–µ—Ç–æ–¥–∞, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ï—Å—Ç—å —Ç—Ä–∏ —Ç–∏–ø–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: `T` (—Ç–∏–ø —Å—Ç—Ä–∏–º–∞), `A` (–∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä - –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å), `R` (—Ä–µ–∑—É–ª—å—Ç–∞—Ç). 

```java
public interface Collector<T, A, R> {
    // –°–æ–∑–¥–∞—Ç—å –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å
    Supplier<A> supplier();

    // –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å
    BiConsumer<A, T> accumulator();

    // –°–∫–ª–µ–∏—Ç—å –¥–≤–∞ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è
    BinaryOperator<A> combiner();

    // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    Function<A, R> finisher();

    // –§–ª–∞–≥–∏ (–µ—Ä—É–Ω–¥–∞ –≤—Å—è–∫–∞—è)
    Set<Characteristics> characteristics();
}
```

–¢–∏–ø –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–≤–µ—Å—Ç–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é





###### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ 

–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç -- —Å–∞–ø–ø–ª–∞–π–µ—Ä -- —Å–æ–∑–¥–∞–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å. 

- –ö–∞–∂–¥—ã–π —Ä–∞–∑ –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –æ–±—ä–µ–∫—Ç, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–π –∫–æ–ª–ª–ª–µ–∫—Ç–æ—Ä –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–∫–µ

–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç -- –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å -- –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å. 

- –¢–∏–ø –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–≤–µ—Å—Ç–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Ç–∞–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å –≤ –±—É–¥—É—â–µ–º, –±–µ–∑ –≤–∑—Ä—ã–≤–∞ —á—É–∂–æ–≥–æ –∫–æ–¥–∞)

–¢—Ä–µ—Ç–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç -- –∫–æ–º–±–∞–π–Ω–µ—Ä -- –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ —Å–∫–ª–µ–∏—Ç—å –¥–≤–∞ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è. 

- –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–±–∞–π–Ω–µ—Ä, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–∏ –ø–æ—Ç–æ–º –Ω–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –ø–æ—ç—Ç–æ–º—É –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å. 
- –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–æ–º–±–∞–π–Ω–µ—Ä -- –ø–ª–æ—Ö–æ–π —Ç–æ–Ω. –ö–æ–º–±–∞–π–Ω–µ—Ä —Ö–æ—Ä–æ—à –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–∫–∏, –∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–∫—É, -- –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. 

–ß–µ—Ç–≤–µ—Ä—Ç—ã–π –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç -- finisher -- –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. 

```java
public static<T, R> Collector<T, R, R> of
    (Supplier<R> supplier,
     BiConsumer<R, T> accumulator,
     BinaryOperator<R> combiner,
     Characteristics... characteristics) 
{
	...
}

public static<T, A, R> Collector<T, A, R> of
    (Supplier<A> supplier,
     BiConsumer<A, T> accumulator,
     BinaryOperator<A> combiner,
     Function<A, R> finisher,
     Characteristics... characteristics) 
{
	...
}
```







######  –ü—Ä–∏–º–µ—Ä —Å `toList`

```java
static <T> Collector<T, ?, List<T>> toList() {
    return Collector.of(
        ArrayList::new, 
        List::add,
        (acc1, acc2) -> {
            acc1.addAll(acc2);
            return acc1;
        }
    );
}
```

–≠–ª–µ–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ `T`, –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å —Ç–∏–ø–∞ `List<T>`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∏–ø–∞ `List<T>`.

–í –∫–∞—á–µ—Å—Ç–≤–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ArrayList`. –°–∞–ø–ø–ª–∞–π–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å, –ø–æ—ç—Ç–æ–º—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –±–µ—Ä–µ—Ç—Å—è `ArrayList::new`. 

–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç -- `BiConsumer` -- –∫–∞–∫ –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç. –ü–æ–¥—Ö–æ–¥–∏—Ç `List::add`. 

–¢—Ä–µ—Ç–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç -- –∫–æ–º–±–∞–π–Ω–µ—Ä. –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª—è–º–±–¥—É. –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–µ–π –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å. 

–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø -- `Collector<T, ?, List<T>>`. –° –≤–æ–ø—Ä–æ—Å–∏–∫–æ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ –Ω–∞–¥–æ –∑–Ω–∞—Ç—å, –∫–∞–∫–æ–π —Ç–∏–ø —É –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è. 





###### –ü—Ä–∏–º–µ—Ä: –∫–æ–ª–ª–µ–∫—Ç–æ—Ä, —Å—á–∏—Ç–∞—é—â–∏–π –∏ –º–∞–∫—Å, –∏ –º–∏–Ω

–•–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä —Ç–∞–∫:

```java
Stream.of("one", "two", "three", "four", "five", "six", "seven", "eight")
	.collect(minMax(Comparator.comparingInt(String::length),
					(min, max) -> min+"|"+max))
	.ifPresent(System.out::println);
```

`minMax` -- –∫–æ–ª–ª–µ–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∞–º —Ä–µ—à–∏—Ç—å:

- –ø–æ –∫–∞–∫–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã (–ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç `minMax` -- –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä)

- –∫–∞–∫ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –º–∏–Ω–∏–º—É–º –∏ –º–∞–∫—Å–∏–º—É–º (–≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç `minMax` -- –ª—è–º–±–¥–∞)

`minMax` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Optional<R>` (—á—Ç–æ–±—ã –≤ —Ç–æ–º —á–∏—Å–ª–µ —Ä–∞–±–æ—Ç–∞–ª–æ –Ω–∞ –ø—É—Å—Ç–æ–º —Å—Ç—Ä–∏–º–µ)



**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**

```java
// –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø -- –∫–æ–ª–ª–µ–∫—Ç–æ—Ä —Å `Optional<R>`
static <T, R> Collector<T, ?, Optional<R>> minMax
    // `cmp` -- –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä
    (Comparator<? super T> cmp, 
   // `finisher` -- —Ñ—É–Ω–∫—Ü–∏—è, –ø–æ–ª—É—á–∞—é—â–∞—è –º–∞–∫—Å –∏ –º–∏–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏—é
     BiFunction<? super T, ? super T, ? extends R> finisher) 
{
    // –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª–∞—Å—Å
    // –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null
    // —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∞–ø–ø–ª–∞–π–µ—Ä–∞ -- `Acc::new`
    class Acc {
        T min;
        T max;
        boolean present; // =false, –µ—Å–ª–∏ —Å—Ç—Ä–∏–º –ø—É—Å—Ç–æ–π
        
        void add(T t) {
            if(present) {
                if(cmp.compare(t, min) < 0) min = t;
                if(cmp.compare(t, max) > 0) max = t;
            } else {
                min = max = t;
                present = true;
            }
        }
        
        // —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–º–±–∞–π–Ω–µ—Ä–∞ 
        // –∏—Å–ø–æ–ª—å–∑—É–µ–º `cmp`, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        Acc combine(Acc other) {
            if(!other.present) return this;
            if(!present) return other;
            if(cmp.compare(other.min, min) < 0) min = other.min;
            if(cmp.compare(other.max, max) > 0) max = other.max;
            return this;
        }
        
        // —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–∏–Ω–∏—à–µ—Ä–∞
        // –∏—Å–ø–æ–ª—å–∑—É–µ–º `finisher`, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        Optional<T> finish(Acc acc) {
            if (acc.present) {
                return Optional.of(finisher.apply(acc.min, acc.max));
            }
            return Optional.empty();
        }
    }
    
	// –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    return Collector.of(
        Acc::new,
        Acc::add,
        Acc::combine,
        Acc::finish
    );
}
```











## 23-04-18

‚úìInputStream ‚Äì —á–∏—Ç–∞—Ç—å –±–∞–π—Ç—ã (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API)

‚úìOutputStream ‚Äì –ø–∏—Å–∞—Ç—å –±–∞–π—Ç—ã (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API)

‚úìReader ‚Äì —á–∏—Ç–∞—Ç—å —Å–∏–º–≤–æ–ª—ã

‚úìWriter ‚Äì –ø–∏—Å–∞—Ç—å —Å–∏–º–≤–æ–ª—ã





### InputStream

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–π—Ç–∞–º–∏ 





#### –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

‚úì`FileInputStream` ‚Äì —Ñ–∞–π–ª

‚úì`ByteArrayInputStream` ‚Äì –º–∞—Å—Å–∏–≤ –±–∞–π—Ç

‚úì`BufferedInputStream` ‚Äì –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞

‚úì`DataInputStream` ‚Äì —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–≤–æ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

‚úì`PipedInputStream` ‚Äì –ø–ª–æ—Ö–æ–π, –Ω–µ–≥–æ–¥–Ω—ã–π

‚úì`ZipFile.getInputStream(ZipEntry)` ‚Äì —Ñ–∞–π–ª –∏–∑ –∑–∏–ø–∞ (–±–µ–∑ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏!)

‚úì`Process.getInputStream() `‚Äì —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–∞

‚úì`URL.openStream()` ‚Äì —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ URL (http/https/file/ftp/etc.)

‚úì...





#### –ú–µ—Ç–æ–¥—ã

–ï—Å—Ç—å —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è. –í—Å–µ –º–µ—Ç–æ–¥—ã –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ (–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π thread)

‚úì`int read()` ‚Üí `-1` –∏–ª–∏ `0..255` -- —Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω –±–∞–π—Ç –∏–∑ –ø–æ—Ç–æ–∫–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –∏–ª–∏ `-1`, –µ—Å–ª–∏ –ø–æ—Ç–æ–∫ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è (EOF)

‚úì`int read(byte[] b)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç (–¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ `b`)

‚úì`int read(byte[] b, int offset, int length)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç –≤ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –º–∞—Å—Å–∏–≤–∞ `b`

‚úì`long skip(long n)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –±–∞–π—Ç -- –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫–∞–∫–æ–µ-—Ç–æ —á–∏—Å–ª–æ –±–∞–π—Ç

‚úì`int available()` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

‚úì`void mark(int readlimit)` -- –ø–æ–º–µ—Ç–∏—Ç—å, —á—Ç–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—á–∏—Ç–∞–µ–º –Ω–µ –±–æ–ª—å—à–µ 100 –±–∞–π—Ç, –∏ –ø–æ—Ç–æ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å –Ω–µ –±–æ–ª—å—à–µ 100 –±–∞–π—Ç 

‚úì`void reset()` -- –≤–µ—Ä–Ω—É—Ç—å –ø–æ—Ç–æ–∫ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –±—ã–ª –¥–æ –≤—ã–∑–æ–≤–∞ `mark`

‚úì`boolean markSupported()`





##### –ü—Ä–∏–º–µ—Ä

```java
import java.io.InputStream;
import java.util.Arrays;
import java.io.IOException;

public class Main {
    static void readFully(InputStream is, byte[] b) throws IOException {
        int offset = 0;
        while(offset < b.length) {
            int count = is.read(b, offset, b.length - offset);
            if(count == -1) {
                throw new IOException("Stream has less than " + b.length + " bytes");
        }
        offset += count;
        }
    }
    
    public static void main(String[] args) throws IOException {
        byte[] b = new byte[10];
        readFully(System.in, b);
        
        System.out.println("result is " + Arrays.toString(b));
        for (byte el : b) {
            System.out.println(el + " --> " + (char) el);
        }
    }
}
```





#### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π InputStream

‚úì`byte[] readAllBytes()` ‚Üí –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (Java 9+)

‚úì`byte[] readNBytes(int len)` ‚Üí –Ω–µ –±–æ–ª—å—à–µ len –±–∞–π—Ç (Java 11+)

‚úì`int readNBytes(byte[] b, int offset, int length)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç (–¥–æ –æ—à–∏–±–∫–∏ –∏–ª–∏ –∫–æ–Ω—Ü–∞ –ø–æ—Ç–æ–∫–∞, Java 11+)

‚úì`void skipNBytes(long n)` ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç n –±–∞–π—Ç (EOFException, –µ—Å–ª–∏ –º–µ–Ω—å—à–µ)

‚úì`long transferTo(OutputStream out)` ‚Üí –ø–µ—Ä–µ–∫–∞—á–∏–≤–∞–µ—Ç –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ (Java 9+)

‚úì`static InputStream nullInputStream()` ‚Üí –ø—É—Å—Ç–æ–π –ø–æ—Ç–æ–∫ (Java 11+)





#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏: p–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞ 

–Ø–≤–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞ -- –º–µ—Ç–æ–¥ `close()`.

–ü—Ä–æ—Å—Ç–æ–π, –Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

```java
InputStream f = new FileInputStream("/etc/passwd");
try {
    int b = f.read();
} finally {
    f.close();
}
```

–ë–µ–∑ try-–±–ª–æ–∫–∞ –±—É–¥–µ—Ç –ø–ª–æ—Ö–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–ª–µ—Ç–∏—Ç –æ—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –±–∞–π—Ç–∞, –∏ —Ñ–∞–π–ª –±—É–¥–µ—Ç –≤–µ—á–Ω–æ –≤–∏—Å–µ—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–π, –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è. 

–ü–æ-—Ö–æ—Ä–æ—à–µ–º—É –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å –±–æ–ª—å—à—É—é –ª–µ—Å–Ω–∏—Ü—É –∏–∑ try-–±–ª–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä–∞—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º —á–∏—Å–ª–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è "–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π" try-–±–ª–æ–∫ [–ù–ê–ó–í–ê–ù–ò–ï –£–î–ê–õ–ï–ù–û]:

```java
try (InputStream in = new FileInputStream("/etc/passwd");
	 OutputStream out = new FileOutputStream("/etc/passwd.bak")) {
	in.transferTo(out);
}

// –ø–æ—Å–ª–µ `try` –≤ —Å–∫–æ–±–∫–∞—Ö —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ
// –≤ —Ç–µ–ª–µ `try`-–±–ª–æ–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –º–∞—Ö–∏–Ω–∞—Ü–∏–∏ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ 	
```

–¢–∞–∫–∞—è —à—Ç—É–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ 

- –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º 
- —Ä–µ—Å—É—Ä—Å—ã –±—É–¥—É—Ç –∑–∞–∫—Ä—ã—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ, –æ–±—Ä–∞—Ç–Ω–æ–º –æ—Ç–∫—Ä—ã–≤–∞–Ω–∏—é
- –ø—Ä–∏ –≤—ã–∫–∏–¥—ã–≤–∞–Ω–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã—Ç—ã







### OutputStream

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–π—Ç–∞–º–∏ 





#### –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

‚úì`FileOutputStream` ‚Äì —Ñ–∞–π–ª

‚úì$\textcolor{green}{\texttt{ByteArrayOutputStream}}$ ‚Äì –º–∞—Å—Å–∏–≤ –±–∞–π—Ç

‚úì`BufferedOutputStream` ‚Äì –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞

‚úì`PrintStream` ‚Äì –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–µ—á–∞—Ç–∏ (System.out)

‚úì`DataOutputStream` ‚Äì —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–≤–æ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

‚úì`PipedOutputStream` (—Ç–æ–∂–µ –ø–ª–æ—Ö–æ–π)

‚úì`Process.getOutputStream()` ‚Äì —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–∞

‚úì`URL.openConnection().getOutputStream()` ‚Äì –ø–∏—Å–∞—Ç—å –≤ URL (HTTP POST)

‚úì...





#### –ú–µ—Ç–æ–¥—ã

–ú–µ—Ç–æ–¥—ã –¥–ª—è –∑–∞–ø–∏—Å–∏, –º–æ–≥—É—Ç –∫–∏–Ω—É—Ç—å `IOException`. 

‚úì`void write(int b) `‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –º–ª–∞–¥—à–∏–µ 8 –±–∏—Ç. –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–∏–ø `int` $\in$ `[0..255]` –≤–º–µ—Å—Ç–æ `byte`, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–∫–æ–≤—ã–π –∏ $\in$ `[-128, 127]`.

‚úì`void write(byte[] b)` ‚Üí –ø–∏—à–µ—Ç –≤–µ—Å—å –º–∞—Å—Å–∏–≤ (–µ—Å–ª–∏ –Ω–µ —É–ø–∞–ª, —Ç–æ –≤—Å—ë –∑–∞–ø–∏—Å–∞–ª. –ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–∫–æ–≥–æ, —á—Ç–æ –∑–∞–ø–∏—Å–∞–ª–∞—Å—å —á–∞—Å—Ç—å)

‚úì`void write(byte[] b, int offset, int length)` ‚Üí —á–∞—Å—Ç—å –º–∞—Å—Å–∏–≤–∞

‚úì`void flush()` -- —Å–±—Ä–æ—Å—å –∫—ç—à–∏ –∫—É–¥–∞-–Ω–∏–±—É–¥—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ñ–∞–π–ª)

‚úì`void close()` 

‚úì`static OutputStream nullOuputStream() `‚Üí –≤—Å—ë, –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–µ —Å—é–¥–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –ø–∏—Å–∞—Ç—å –º–æ–∂–Ω–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ



***Note:*** —É `ByteArrayOutputStream` —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–∫–∞—è, —á—Ç–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –Ω–µ –∫–∏–¥–∞—é—Ç `IOException`. –ö—Ä–æ–º–µ `write(byte[] b)`. –ü—Ä–∏–∫–æ–ª.





##### –ü—Ä–∏–º–µ—Ä

```java
public static void main(String[] args) {
    // —Å–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –±–∞–π—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    
    baos.write(0x01);
    baos.write(0x02);
    baos.write(0x03);
    
    byte[] result = baos.toByteArray();
    
    System.out.println(Arrays.toString(result));
    // [1, 2, 3]
}
```







### Reader

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∏–º–≤–æ–ª–∞–º–∏





#### –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

‚úì`InputStreamReader (InputStream + charset)` -- —á—Ç–µ–Ω–∏–µ –∏–∑ `InputStream`

‚úì`FileReader` (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ) -- —á—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞

- –í Java 11 –ø–æ—è–≤–∏–ª—Å—è `FileReader(file, charset)`

- –í Java 18 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UTF-8, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

‚úì`StringReader`

‚úì`BufferedReader`

- `String readLine()` -- —Å—á–∏—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫—É –¥–æ –±–ª–∏–∂–∞–π—â–µ–≥–æ `\n` 
- `Stream<String> lines()` -- –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∏–º, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ —Å—Ç—Ä–æ–∫ 

‚úì...





#### –ú–µ—Ç–æ–¥—ã

‚úì`int read()` ‚Üí -1 –∏–ª–∏ 0..0xFFFF

‚úì`int read(char[] cb)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

‚úì`int read(char[] cb, int offset, int length)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

‚úì`long skip(long n)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ, –∫–∞–∫ `skip()`  —É –±–∞–π—Ç–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å $> 1$ –±–∞–π—Ç–∞.

‚úì`boolean ready()` ‚Üí –º–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

‚úì`void mark(int readlimit)`

‚úì`void reset()`

‚úì`boolean markSupported()`

‚úì`long transferTo(Writer out)` ‚Äì Java 10

‚úì`static Reader nullReader()` ‚Äì Java 11





### Writer

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∏–º–≤–æ–ª–∞–º–∏ 





#### –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

‚úì`OutputStreamWriter(OutputStream + charset)` -- –∑–∞–ø–∏—Å—å –≤ `OutputStream`

‚úì`FileWriter` (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ)

- –í Java 11 –ø–æ—è–≤–∏–ª—Å—è `FileWriter(file, charset)`

- –í Java 18 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UTF-8, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 

‚úì`StringWriter` 

‚úì`BufferedWriter`

‚úì...





#### –ú–µ—Ç–æ–¥—ã

‚úì`void write(int b)` ‚Üí –ø–∏—à–µ—Ç 16 –º–ª–∞–¥—à–∏—Ö –±–∏—Ç

‚úì`void write(char[] cb) `‚Üí –ø–∏—à–µ—Ç –≤–µ—Å—å –º–∞—Å—Å–∏–≤ (–µ—Å–ª–∏ –Ω–µ —É–ø–∞–ª, —Ç–æ –≤—Å—ë
–∑–∞–ø–∏—Å–∞–ª)

‚úì`void write(char[] cb, int offset, int length)` ‚Üí —á–∞—Å—Ç—å –º–∞—Å—Å–∏–≤–∞

‚úì`void write(String str) `‚Üí –ø–∏—à–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É (–µ—Å–ª–∏ –Ω–µ —É–ø–∞–ª, —Ç–æ –≤—Å—ë –∑–∞–ø–∏—Å–∞–ª)

‚úì`void write(String str, int offset, int length)` ‚Üí —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏

‚úì`void flush()`

‚úì`void close()`

‚úì`static Writer nullWriter()` ‚Äì Java 11







### `java.io.File` (–∫–ª–∞—Å—Å–∏–∫–∞)

‚úì–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –∏ —Å–∞–º —Ñ–∞–π–ª (–∫–∞—Ç–∞–ª–æ–≥ –∏ —Ç. –¥.)

‚úì–ú–æ–∂–µ—Ç –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º

‚úì–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ Java-–ø—Ä–æ—Ü–µ—Å—Å–∞ (–∏ –µ–≥–æ –∫—Ä–∞–π–Ω–µ —Ç—Ä—É–¥–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å)

```java
// new File(parentDirectory + "/" + fileName); -- bad
// new File(parentDirectory + File.separator + fileName); -- bad
File aboba = new File(parentDirectory, fileName); // OK
```





#### –ú–µ—Ç–æ–¥—ã

‚úìgetName()/getPath()/getParent()/getParentFile()

‚úìgetAbsoluteFile()/getAbsolutePath() -- –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å/—Ñ–∞–π–ª

‚úìgetCanonicalFile()/getCanonicalPath() -- —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∏ –ø–æ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–º —Å—Å—ã–ª–∫–∞–º

‚úìexists()/canRead()/canWrite()/canExecute()/length()

‚úìisDirectory()/isFile()/isHidden()

‚úìcreateNewFile()/mkdir()/mkdirs()

‚úìrenameTo()/delete()

‚úìlist([filter]) (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫) / listFiles([filter]) (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤)





#### –ü—Ä–∏–º–µ—Ä

```java
import java.io.File;

public class Main {
    public static void main(String[] args) {
        String fname = args[0];
        File f = new File(fname);
  
        System.out.println("File name :" + f.getName());
        System.out.println("Path: " + f.getPath());
        System.out.println("Absolute path:"
                           + f.getAbsolutePath());
        System.out.println("Parent:" + f.getParent());
        System.out.println("Exists :" + f.exists());
  
        if (f.exists()) {
            System.out.println("Is writable:"
                               + f.canWrite());
            System.out.println("Is readable" + f.canRead());
            System.out.println("Is a directory:"
                               + f.isDirectory());
            System.out.println("File Size in bytes "
                               + f.length());
        }
    }
}
```





### `java.nio.file.[Path/Paths/Files]`

–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫—É (—Å—Ç—Ä–æ–∫–∏) –≤ –ø—É—Ç—å

```java
Path p = Paths.get("/etc/passwd");
Path p = Paths.get(parentDirectory, fileName);
Path p = Paths.get("foo", "bar", "baz");

// –Ω–∞—á–∏–Ω–∞—è —Å Java 11:
Path p = Path.of("/etc/passwd");
Path p = Path.of(parentDirectory, fileName);
Path p = Path.of("foo", "bar", "baz");
```





#### –ú–µ—Ç–æ–¥—ã

‚úì`getFileName()`

‚úì`getParent()`

‚úì`getRoot()`

‚úì`resolve(Path/String)`, `resolveSibling(Path/String)` -- –∏—â–µ—Ç —Ñ–∞–π–ª –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ –ø—É—Ç–∏ (–ø–µ—Ä–≤—ã–π -- –≤ –ø—Ä–µ–¥–∫–∞—Ö, –≤—Ç–æ—Ä–æ–π -- –≤ –¥–µ—Ç—è—Ö)

‚úì`isAbsolute()`/`toAbsolutePath()`

‚úì`startsWith(Path/String)`, `endsWith(Path/String)`

‚úì`getName(int)`, `getNameCount()`, `iterator()`

‚úì`toString()`/`toFile()`/`toUri()`

‚úì`register(WatchService, WatchEvent.Kind...)`









## 23-07-21

### Thread synchronization

- A **critical section** is a region of code that accesses shared resources and should not be executed by more than one thread at the same time. A shared resource may be a variable, file, input/output port, database or something else.
- The **monitor** is a special mechanism to control concurrent access to an object. In Java, <u>each object and class</u> has an associated implicit monitor. A thread can acquire a monitor, then other threads cannot acquire this monitor at the same time. They will wait until the owner (the thread that acquired the monitor) releases it.





### `synchronized`

The keyword `synchronized` means the method or the block can be accessed only by one thread at a time. 

The keyword can be used in two forms:

- synchronized method (a static or an instance method)
- synchronized block (inside a static or an instance method)





#### Static synchronized methods

= synchronization on the class.

Only one thread can execute the body of a synchronized static method at the same time. 

```java
class SomeClass {
    public static synchronized void doSomething() {
        String threadName = Thread.currentThread().getName();
        System.out.println(threadName + " entered the static method");
        System.out.println(threadName + " leaves the static method");
    }
}



class MyThread extends Thread {

    @Override
    public void run() {
        SomeClass.doSomething();
    }
}



public class Main {
    public static void main(String[] args) {

        MyThread first = new MyThread();
        MyThread second = new MyThread();
        MyThread third = new MyThread();

        first.start();
        second.start();
        third.start();
    }
}
```

```shell
Thread-0 entered the static method
Thread-0 leaves the static method
Thread-2 entered the static method
Thread-2 leaves the static method
Thread-1 entered the static method
Thread-1 leaves the static method
```







#### Instance synchronized methods

= synchronization on the class instance.

Only one thread can execute code in a synchronized instance method of a particular instance. This can be summarized as *"one thread per instance"*.

```java
class SomeClass {
    private final String name;

    SomeClass(String name) {
        this.name = name;
    }

    public synchronized void doSomething() {
        String threadName = Thread.currentThread().getName();
        System.out.println(threadName + " entered the method of " + name);
        System.out.println(threadName + " leaves the method of " + name);
    }
}



class MyThread extends Thread {
    private final SomeClass someClass;

    public MyThread(SomeClass someClass) {
        this.someClass = someClass;
    }

    @Override
    public void run() {
        someClass.doSomething();
    }
}



public class Main {
    public static void main(String[] args) {
        SomeClass instance1 = new SomeClass("instance-1");
        SomeClass instance2 = new SomeClass("instance-2");

        MyThread first = new MyThread(instance1);
        MyThread second = new MyThread(instance1);
        MyThread third = new MyThread(instance2);

        first.start();
        second.start();
        third.start();
    }
}
```

```shell
Thread-2 entered the method of instance-2
Thread-0 entered the method of instance-1
Thread-2 leaves the method of instance-2
Thread-0 leaves the method of instance-1
Thread-1 entered the method of instance-1
Thread-1 leaves the method of instance-1
```







#### Synchronized blocks

Here is a class with a static and an instance method. Both methods are unsynchronized but have synchronized parts inside.

```java
class SomeClass {

    public static void staticMethod() {
        // unsynchronized code
        synchronized (SomeClass.class) { // synchronization on the class
            // synchronized code
        }
    }

    public void instanceMethod() {
        // unsynchronized code
        synchronized (this) { // synchronization on this instance
            // synchronized code
        }
    }
}
```







#### One monitor and multiple synchronized methods and blocks

1. If a class has several synchronized instance methods and a thread invokes one of them, other threads cannot execute either of these methods on the same instance until the first thread releases the monitor of the instance.

2. A thread can acquire a lock that it already owns. This behavior is called **reentrant synchronization**. For example, the class has synchronized methods `method1()` and `method2()`. When a thread is inside `method1` it can invoke `method2`, because both methods are synchronized on the same class/instance.





#### Multiple monitors 

To improve the concurrency rate it's possible to use an idiom with additional objects as monitors.

Here is an example: a class with two methods. The class stores the number of calls to each method in a special field.

```java
class SomeClass {

    private int numberOfCallingMethod1 = 0;
    private int numberOfCallingMethod2 = 0;

    final Object lock1 = new Object(); // an object for locking
    final Object lock2 = new Object(); // another object for locking

    public void method1() {
        System.out.println("method1...");

        synchronized (lock1) {
            numberOfCallingMethod1++;
        }
    }

    public void method2() {
        System.out.println("method2...");
        
        synchronized (lock2) {
            numberOfCallingMethod2++;
        }
    }
}
```

As you can see, the class has two additional fields that are the locks for separating monitors for each critical section.

If we have an instance of the class, one thread may work inside the synchronized block of the first method and, at the same time, another thread may work inside the synchronized block of the second method.







### Collections and thread-safety

It is a bad idea to use <u>standard collections</u> in multi-threaded environments without explicit synchronization (though, such synchronization may lead to poor performance and hard-to-find errors in large programs):

- most of the classic collections like `ArrayList`, `LinkedList`, `HashMap` and others are non-synchronized
- there is a set of old collections like `Vector`, `Stack`, and `Hashtable` that are totally synchronized and thread-safe, but they have low performance
- when one thread is iterating over a non-thread-safe collection and another thread tries to add a new element to it then we get a runtime exception called `ConcurrentModificationException`
- when multiple threads write to and read from a non-thread-safe collection, some writes made by one thread may not be visible to the other threads



Java Class Library provides alternative collection implementations that are adapted to be used in multithreaded applications and they are fully thread-safe. You may find them in the `java.util.concurrent` package.

These concurrent collections allow you to avoid custom synchronization. They have high performance close to classic collections. Concurrent collections do not use the `synchronized` keyword but rely on more complex synchronization primitives and lock-free algorithm that allows them to be both thread-safe and high-performance.

However, if you do not really need multi-threading, use classic collections, since they are still more efficient than concurrent ones. than concurrent ones
